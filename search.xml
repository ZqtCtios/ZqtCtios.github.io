<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title></title>
      <link href="2020/12/06/python/fluentpython/chapter-02-an-array-of-sequences/"/>
      <url>2020/12/06/python/fluentpython/chapter-02-an-array-of-sequences/</url>
      
        <content type="html"><![CDATA[]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>03_ç¥ç»ç½‘ç»œ_Neura_ Network</title>
      <link href="2020/12/06/machinelearning/wu-en-da-ji-qi-xue-xi/neural-networks/"/>
      <url>2020/12/06/machinelearning/wu-en-da-ji-qi-xue-xi/neural-networks/</url>
      
        <content type="html"><![CDATA[<h1 id="ç¥ç»ç½‘ç»œneural-network">ç¥ç»ç½‘ç»œNeural Network</h1><h2 id="éçº¿æ€§å‡è®¾">1.éçº¿æ€§å‡è®¾</h2><p>çº¿æ€§å›å½’è¿˜æ˜¯é€»è¾‘å›å½’éƒ½æœ‰è¿™æ ·ä¸€ä¸ªç¼ºç‚¹ï¼Œå³:å½“ç‰¹å¾å¤ªå¤šæ—¶ï¼Œ è®¡ç®—çš„è´Ÿè·ä¼šéå¸¸å¤§ã€‚ä¾‹å¦‚ä¸‹é¢çš„ä¾‹å­ï¼š</p><figure><img src="https://cdn.jsdelivr.net/gh/ZqtCtios/Image/img/20201206183433.png" alt="ç¤ºä¾‹å›¾"><figcaption>ç¤ºä¾‹å›¾</figcaption></figure><p>ä¹‹å‰æˆ‘ä»¬å·²ç»çœ‹åˆ°è¿‡ï¼Œä½¿ç”¨éçº¿æ€§çš„å¤šé¡¹å¼é¡¹ï¼Œèƒ½å¤Ÿå¸®åŠ©æˆ‘ä»¬å»ºç«‹æ›´å¥½çš„åˆ†ç±»æ¨¡å‹ã€‚å‡è®¾æˆ‘ä»¬æœ‰éå¸¸å¤šçš„ç‰¹å¾, ä¾‹å¦‚å¤§äº 100 ä¸ªå˜é‡, æˆ‘ä»¬å¸Œæœ›ç”¨è¿™ 100 ä¸ªç‰¹å¾æ¥æ„å»ºä¸€ä¸ªéçº¿æ€§çš„å¤šé¡¹å¼æ¨¡å‹, ç»“æœå°†æ˜¯æ•°é‡éå¸¸æƒŠäººçš„ç‰¹å¾ç»„åˆ, å³ä¾¿æˆ‘ä»¬åªé‡‡ç”¨ä¸¤ä¸¤ç‰¹å¾çš„ç»„åˆ <span class="math inline">\(\left(x_{1} x_{2}+\right.\left.x_{1} x_{3}+x_{1} x_{4}+\ldots+x_{2} x_{3}+x_{2} x_{4}+\ldots+x_{99} x_{100}\right),\)</span> æˆ‘ä»¬ä¹Ÿä¼šæœ‰æ¥è¿‘ 5000 ä¸ªç»„åˆè€Œæˆçš„ç‰¹å¾ã€‚è¿™å¯¹äºä¸€èˆ¬çš„é€»è¾‘å›å½’æ¥è¯´éœ€è¦è®¡ç®—çš„ç‰¹å¾å¤ªå¤šäº†ã€‚</p><p>å‡è®¾æˆ‘ä»¬å¸Œæœ›è®­ç»ƒä¸€ä¸ªæ¨¡å‹æ¥è¯†åˆ«è§†è§‰å¯¹è±¡ï¼ˆä¾‹å¦‚è¯†åˆ«ä¸€å¼ å›¾ç‰‡ä¸Šæ˜¯å¦æ˜¯ä¸€è¾†æ±½è½¦ï¼‰ï¼Œ æˆ‘ä»¬æ€æ ·æ‰èƒ½è¿™ä¹ˆåšå‘¢?ä¸€ç§æ–¹æ³•æ˜¯æˆ‘ä»¬åˆ©ç”¨å¾ˆå¤šæ±½è½¦çš„å›¾ç‰‡å’Œå¾ˆå¤šéæ±½è½¦çš„å›¾ç‰‡ï¼Œç„¶ååˆ©ç”¨è¿™äº›å›¾ç‰‡ä¸Šä¸€ä¸ªä¸ªåƒç´ çš„å€¼ï¼ˆé¥±å’Œåº¦æˆ–äº®åº¦ï¼‰æ¥ä½œä¸ºç‰¹å¾ã€‚</p><p>å‡å¦‚æˆ‘ä»¬åªé€‰ç”¨ç°åº¦å›¾ç‰‡ï¼Œæ¯ä¸ªåƒç´ åˆ™åªæœ‰ä¸€ä¸ªå€¼ï¼ˆè€Œé RGB å€¼ï¼‰ï¼Œæˆ‘ä»¬å¯ä»¥é€‰å–å›¾ç‰‡ä¸Šçš„ä¸¤ä¸ªä¸åŒä½ç½®ä¸Šçš„ä¸¤ä¸ªåƒç´ ï¼Œç„¶åè®­ç»ƒä¸€ä¸ªé€»è¾‘å›å½’ç®—æ³•åˆ©ç”¨è¿™ä¸¤ä¸ªåƒç´ çš„å€¼æ¥åˆ¤æ–­å›¾ç‰‡ä¸Šæ˜¯å¦æ˜¯æ±½è½¦:</p><figure><img src="https://cdn.jsdelivr.net/gh/ZqtCtios/Image/img/20201206183716.png" alt="æ±½è½¦è¯†åˆ«"><figcaption>æ±½è½¦è¯†åˆ«</figcaption></figure><p>å‡ä½¿æˆ‘ä»¬é‡‡ç”¨çš„éƒ½æ˜¯ 50x50 åƒç´ çš„å°å›¾ç‰‡ï¼Œå¹¶ä¸”æˆ‘ä»¬å°†æ‰€æœ‰çš„åƒç´ è§†ä¸ºç‰¹å¾ï¼Œåˆ™ä¼šæœ‰ 2500 ä¸ªç‰¹å¾ï¼Œå¦‚æœæˆ‘ä»¬è¦è¿›ä¸€æ­¥å°†ä¸¤ä¸¤ç‰¹å¾ç»„åˆæ„æˆä¸€ä¸ªå¤šé¡¹å¼æ¨¡å‹ï¼Œåˆ™ä¼šæœ‰çº¦25002/2ä¸ª ï¼ˆæ¥è¿‘ 3 ç™¾ä¸‡ä¸ªï¼‰ç‰¹å¾ã€‚æ™®é€šçš„é€»è¾‘å›å½’æ¨¡å‹ï¼Œä¸èƒ½æœ‰æ•ˆåœ°å¤„ç†è¿™ä¹ˆå¤šçš„ç‰¹å¾ï¼Œè¿™æ—¶å€™æˆ‘ä»¬éœ€è¦ç¥ç»ç½‘ç»œã€‚</p><h2 id="æ¨¡å‹è¡¨ç¤º-1">2.æ¨¡å‹è¡¨ç¤º 1</h2><p>ä¸ºäº†æ„å»ºç¥ç»ç½‘ç»œæ¨¡å‹ï¼Œæˆ‘ä»¬éœ€è¦é¦–å…ˆæ€è€ƒå¤§è„‘ä¸­çš„ç¥ç»ç½‘ç»œæ˜¯æ€æ ·çš„?æ¯ä¸€ä¸ªç¥ç»å…ƒ éƒ½å¯ä»¥è¢«è®¤ä¸ºæ˜¯ä¸€ä¸ªå¤„ç†å•å…ƒ/ç¥ç»æ ¸ï¼ˆprocessing unit/Nucleusï¼‰ï¼Œå®ƒå«æœ‰è®¸å¤šè¾“å…¥/æ ‘çª ï¼ˆinput/Dendriteï¼‰ï¼Œå¹¶ä¸”æœ‰ä¸€ä¸ªè¾“å‡º/è½´çªï¼ˆoutput/Axonï¼‰ã€‚ç¥ç»ç½‘ç»œæ˜¯å¤§é‡ç¥ç»å…ƒç›¸äº’é“¾ æ¥å¹¶é€šè¿‡ç”µè„‰å†²æ¥äº¤æµçš„ä¸€ä¸ªç½‘ç»œã€‚</p><figure><img src="https://cdn.jsdelivr.net/gh/ZqtCtios/Image/img/20201206223440.png" alt="äººä½“ç¥ç»ç½‘ç»œå›¾"><figcaption>äººä½“ç¥ç»ç½‘ç»œå›¾</figcaption></figure><p>ç¥ç»ç½‘ç»œæ¨¡å‹å»ºç«‹åœ¨å¾ˆå¤šç¥ç»å…ƒä¹‹ä¸Šï¼Œæ¯ä¸€ä¸ªç¥ç»å…ƒåˆæ˜¯ä¸€ä¸ªä¸ªå­¦ä¹ æ¨¡å‹ã€‚è¿™äº›ç¥ç»å…ƒ ï¼ˆä¹Ÿå«æ¿€æ´»å•å…ƒï¼Œactivation unitï¼‰é‡‡çº³ä¸€äº›ç‰¹å¾ä½œä¸ºè¾“å‡ºï¼Œå¹¶ä¸”æ ¹æ®æœ¬èº«çš„æ¨¡å‹æä¾›ä¸€ä¸ªè¾“å‡ºã€‚ä¸‹å›¾æ˜¯ä¸€ä¸ªä»¥é€»è¾‘å›å½’æ¨¡å‹ä½œä¸ºè‡ªèº«å­¦ä¹ æ¨¡å‹çš„ç¥ç»å…ƒç¤ºä¾‹ï¼Œåœ¨ç¥ç»ç½‘ç»œä¸­ï¼Œå‚æ•°åˆå¯ è¢«æˆä¸ºæƒé‡ï¼ˆweightï¼‰ã€‚</p><figure><img src="https://cdn.jsdelivr.net/gh/ZqtCtios/Image/img/20201206184747.png" alt="ç¥ç»å…ƒç¤ºä¾‹"><figcaption>ç¥ç»å…ƒç¤ºä¾‹</figcaption></figure><p>æˆ‘ä»¬è®¾è®¡å‡ºäº†ç±»ä¼¼äºç¥ç»å…ƒçš„ç¥ç»ç½‘ç»œï¼Œæ•ˆæœå¦‚ä¸‹:</p><figure><img src="https://cdn.jsdelivr.net/gh/ZqtCtios/Image/img/20201206223511.png" alt="ç¥ç»ç½‘ç»œæ¨¡å‹"><figcaption>ç¥ç»ç½‘ç»œæ¨¡å‹</figcaption></figure><p>å…¶ä¸­ <span class="math inline">\(x_{1}, x_{2}, x_{3}\)</span> æ˜¯è¾“å…¥å•å…ƒï¼ˆinput unitsï¼‰ï¼Œæˆ‘ä»¬å°†åŸå§‹æ•°æ®è¾“å…¥ç»™å®ƒä»¬ã€‚<span class="math inline">\(a_{1}, a_{2}, a_{3}\)</span> æ˜¯ä¸­é—´å•å…ƒï¼Œå®ƒä»¬è´Ÿè´£å°†æ•°æ®è¿›è¡Œå¤„ç†ï¼Œç„¶åå‘ˆé€’åˆ°ä¸‹ä¸€å±‚ã€‚æœ€åæ˜¯è¾“å‡ºå•å…ƒï¼Œå®ƒè´Ÿè´£è®¡ç®— <span class="math inline">\(h_{\theta}(x)\)</span> ã€‚</p><p>ç¥ç»ç½‘ç»œæ¨¡å‹æ˜¯è®¸å¤šé€»è¾‘å•å…ƒæŒ‰ç…§ä¸åŒå±‚çº§ç»„ç»‡èµ·æ¥çš„ç½‘ç»œï¼Œæ¯ä¸€å±‚çš„è¾“å‡ºå˜é‡éƒ½æ˜¯ä¸‹ ä¸€å±‚çš„è¾“å…¥å˜é‡ã€‚ä¸‹å›¾ä¸ºä¸€ä¸ª 3 å±‚çš„ç¥ç»ç½‘ç»œï¼Œç¬¬ä¸€å±‚æˆä¸ºè¾“å…¥å±‚ï¼ˆInput Layerï¼‰ï¼Œæœ€åä¸€ å±‚ç§°ä¸ºè¾“å‡ºå±‚ï¼ˆOutput Layerï¼‰ï¼Œä¸­é—´ä¸€å±‚æˆä¸ºéšè—å±‚ï¼ˆHidden Layersï¼‰ã€‚æˆ‘ä»¬ä¸ºæ¯ä¸€å±‚éƒ½å¢ åŠ ä¸€ä¸ªåå·®å•ä½ï¼ˆbias unitï¼‰ï¼Œä¸‹é¢å¼•å…¥ä¸€äº›æ ‡è®°æ³•æ¥å¸®åŠ©æè¿°æ¨¡å‹:</p><p><span class="math inline">\(a_{i}^{(j)}\)</span> ä»£è¡¨ç¬¬j å±‚çš„ç¬¬ <span class="math inline">\(i\)</span> ä¸ªæ¿€æ´»å•å…ƒã€‚ <span class="math inline">\(\theta^{(j)}\)</span> ä»£è¡¨ä»ç¬¬ <span class="math inline">\(j\)</span> å±‚æ˜ å°„åˆ°ç¬¬ <span class="math inline">\(j+1\)</span> å±‚æ—¶çš„æƒé‡çš„çŸ©é˜µï¼Œä¾‹å¦‚ <span class="math inline">\(\theta^{(1)}\)</span> ä»£è¡¨ä»ç¬¬ä¸€å±‚æ˜ å°„åˆ°ç¬¬äºŒå±‚çš„æƒé‡çš„çŸ©é˜µã€‚å…¶å°ºå¯¸ä¸º: ä»¥ç¬¬ <span class="math inline">\(j+1\)</span> å±‚çš„æ¿€æ´»å•å…ƒæ•°é‡ä¸ºè¡Œæ•°ï¼Œä»¥ç¬¬ <span class="math inline">\(j\)</span> å±‚çš„æ¿€æ´»å•å…ƒæ•°åŠ ä¸€ä¸ºåˆ—æ•°çš„çŸ©é˜µã€‚ä¾‹å¦‚ï¼šä¸Šå›¾æ‰€ç¤ºçš„ç¥ç»ç½‘ç»œä¸­<span class="math inline">\(\theta^{(1)}\)</span> çš„å°ºå¯¸ä¸º <span class="math inline">\(3^{*} 4\)</span> ã€‚</p><p>å¯¹äºä¸Šå›¾æ‰€ç¤ºçš„æ¨¡å‹ï¼Œæ¿€æ´»å•å…ƒå’Œè¾“å‡ºåˆ†åˆ«è¡¨è¾¾ä¸º: <span class="math display">\[\begin{array}{l}a_{1}^{(2)}=g\left(\Theta_{10}^{(1)} x_{0}+\Theta_{11}^{(1)} x_{1}+\Theta_{12}^{(1)} x_{2}+\Theta_{13}^{(1)} x_{3}\right) \\a_{2}^{(2)}=g\left(\theta_{20}^{(1)} x_{0}+\Theta_{21}^{(1)} x_{1}+\Theta_{22}^{(1)} x_{2}+\theta_{23}^{(1)} x_{3}\right) \\a_{3}^{(2)}=g\left(\theta_{30}^{(1)} x_{0}+\Theta_{31}^{(1)} x_{1}+\theta_{32}^{(1)} x_{2}+\theta_{33}^{(1)} x_{3}\right) \\h_{\theta}(x)=g\left(\Theta_{10}^{(2)} a_{0}^{(2)}+\Theta_{11}^{(2)} a_{1}^{(2)}+\Theta_{12}^{(2)} a_{2}^{(2)}+\Theta_{13}^{(2)} a_{3}^{(2)}\right)\end{array}\]</span> ä¸Šé¢è¿›è¡Œçš„è®¨è®ºä¸­åªæ˜¯å°†ç‰¹å¾çŸ©é˜µä¸­çš„ä¸€è¡Œï¼ˆä¸€ä¸ªè®­ç»ƒå®ä¾‹ï¼‰å–‚ç»™äº†ç¥ç»ç½‘ç»œï¼Œæˆ‘ä»¬éœ€è¦å°†æ•´ä¸ªè®­ç»ƒé›†éƒ½å–‚ç»™æˆ‘ä»¬çš„ç¥ç»ç½‘ç»œç®—æ³•æ¥å­¦ä¹ æ¨¡å‹ã€‚</p><p>æˆ‘ä»¬å¯ä»¥çŸ¥é“:æ¯ä¸€ä¸ªğ‘éƒ½æ˜¯ç”±ä¸Šä¸€å±‚æ‰€æœ‰çš„ğ‘¥å’Œæ¯ä¸€ä¸ªğ‘¥æ‰€å¯¹åº”çš„å†³å®šçš„ã€‚ ï¼ˆæˆ‘ä»¬æŠŠè¿™æ ·ä»å·¦åˆ°å³çš„ç®—æ³•ç§°ä¸ºå‰å‘ä¼ æ’­ç®—æ³•ï¼ˆFORWARD PROPAGATIONï¼‰ï¼‰</p><p>æŠŠğ‘¥, ğœƒ, ğ‘ åˆ†åˆ«ç”¨çŸ©é˜µè¡¨ç¤ºï¼Œæˆ‘ä»¬å¯ä»¥å¾—åˆ°ğœƒ â‹… ğ‘‹ = ğ‘ :</p><figure><img src="https://cdn.jsdelivr.net/gh/ZqtCtios/Image/img/20201206223520.png" alt="image-20201206185810317"><figcaption>image-20201206185810317</figcaption></figure><h2 id="æ¨¡å‹è¡¨ç¤º-2">3.æ¨¡å‹è¡¨ç¤º 2</h2><p>ï¼ˆFORWARD PROPAGATIONï¼‰ç›¸å¯¹äºä½¿ç”¨å¾ªç¯æ¥ç¼–ç ï¼Œåˆ©ç”¨å‘é‡åŒ–çš„æ–¹æ³•ä¼šä½¿å¾—è®¡ç®—æ›´ ä¸ºç®€ä¾¿ã€‚ä»¥ä¸Šé¢çš„ç¥ç»ç½‘ç»œä¸ºä¾‹ï¼Œè¯•ç€è®¡ç®—ç¬¬äºŒå±‚çš„å€¼: <span class="math display">\[x=\left[\begin{array}{l}x_{0} \\x_{1} \\x_{2} \\x_{3}\end{array}\right] \quad z^{(2)}=\left[\begin{array}{l}z_{1}^{(2)} \\z_{2}^{(2)} \\z_{3}^{(2)}\end{array}\right]\]</span></p><p><span class="math display">\[\begin{array}{l}z^{(2)}=\Theta^{(1)} x \\a^{(2)}=g\left(z^{(2)}\right)\end{array}\]</span></p><p><span class="math display">\[g\left(\left[\begin{array}{llll}\theta_{10}^{(1)} &amp; \theta_{11}^{(1)} &amp; \theta_{12}^{(1)} &amp; \theta_{13}^{(1)} \\\theta_{20}^{(1)} &amp; \theta_{21}^{(1)} &amp; \theta_{22}^{(1)} &amp; \theta_{23}^{(1)} \\\theta_{30}^{(1)} &amp; \theta_{31}^{(1)} &amp; \theta_{32}^{(1)} &amp; \theta_{33}^{(1)}\end{array}\right] \times\left[\begin{array}{l}x_{0} \\x_{1} \\x_{2} \\x_{3}\end{array}\right]\right)=g\left(\left[\begin{array}{l}\theta_{10}^{(1)} x_{0}+\theta_{11}^{(1)} x_{1}+\theta_{12}^{(1)} x_{2}+\theta_{13}^{(1)} x_{3} \\\theta_{20}^{(1)} x_{0}+\theta_{21}^{(1)} x_{1}+\theta_{22}^{(1)} x_{2}+\theta_{23}^{(1)} x_{3} \\\theta_{30}^{(1)} x_{0}+\theta_{31}^{(1)} x_{1}+\theta_{32}^{(1)} x_{2}+\theta_{33}^{(1)} x_{3}\end{array}\right]\right)=\left[\begin{array}{l}a_{1}^{(2)} \\a_{2}^{(2)} \\a_{3}^{(2)}\end{array}\right]\]</span></p><p>æˆ‘ä»¬ä»¤ <span class="math inline">\(z^{(2)}=\theta^{(1)} x,\)</span> åˆ™ <span class="math inline">\(a^{(2)}=g\left(z^{(2)}\right),\)</span> è®¡ç®—åæ·»åŠ  <span class="math inline">\(a_{0}^{(2)}=1\)</span>ã€‚è®¡ç®—è¾“å‡ºçš„å€¼ä¸º : <span class="math display">\[\left.g\left(\left[\begin{array}{llll}\theta_{10}^{(2)} &amp; \theta_{11}^{(2)} &amp; \theta_{12}^{(2)} &amp; \theta_{13}^{(2)}\end{array}\right] \times \mid \begin{array}{l}u_{0} \\a_{1}^{(2)} \\a_{2}^{(2)} \\a_{3}^{(2)}\end{array}\right]\right)=g\left(\theta_{10}^{(2)} a_{0}^{(2)}+\theta_{11}^{(2)} a_{1}^{(2)}+\theta_{12}^{(2)} a_{2}^{(2)}+\theta_{13}^{(2)} a_{3}^{(2)}\right)=h_{\theta}(x)\]</span> æˆ‘ä»¬ä»¤ <span class="math inline">\(z^{(3)}=\theta^{(2)} a^{(2)},\)</span> åˆ™ <span class="math inline">\(h_{\theta}(x)=a^{(3)}=g\left(z^{(3)}\right)\)</span> ã€‚</p><p>è¿™åªæ˜¯é’ˆå¯¹è®­ç»ƒé›†ä¸­ä¸€ä¸ªè®­ç»ƒå®ä¾‹æ‰€è¿›è¡Œçš„è®¡ç®—ã€‚å¦‚æœæˆ‘ä»¬è¦å¯¹æ•´ä¸ªè®­ç»ƒé›†è¿›è¡Œè®¡ç®—ï¼Œ æˆ‘ä»¬éœ€è¦å°†è®­ç»ƒé›†ç‰¹å¾çŸ©é˜µè¿›è¡Œè½¬ç½®ï¼Œä½¿å¾—åŒä¸€ä¸ªå®ä¾‹çš„ç‰¹å¾éƒ½åœ¨åŒä¸€åˆ—é‡Œã€‚å³: <span class="math display">\[\begin{array}{l}z^{(2)}=\Theta^{(1)} \times X^{T} \\a^{(2)}=g\left(z^{(2)}\right)\end{array}\]</span> ä¸ºäº†æ›´å¥½äº†äº†è§£ Neuron Networks çš„å·¥ä½œåŸç†ï¼Œæˆ‘ä»¬å…ˆæŠŠå·¦åŠéƒ¨åˆ†é®ä½:</p><figure><img src="https://cdn.jsdelivr.net/gh/ZqtCtios/Image/img/20201206192646.png" alt="é®ä½"><figcaption>é®ä½</figcaption></figure><p>å…¶å®ç¥ç»ç½‘ç»œå°±åƒæ˜¯ logistic regressionï¼Œ åªä¸è¿‡æˆ‘ä»¬æŠŠ logistic regression ä¸­çš„è¾“å…¥å‘é‡ <span class="math inline">\(\left[x_{1} \sim x_{3}\right]\)</span> å˜æˆäº†ä¸­é—´å±‚çš„ <span class="math inline">\(\left[a_{1}^{(2)} \sim a_{3}^{(2)}\right],\)</span> å³:</p><p><span class="math inline">\(h_{\theta}(x)=g\left(\theta_{0}^{(2)} a_{0}^{(2)}+\theta_{1}^{(2)} a_{1}^{(2)}+\theta_{2}^{(2)} a_{2}^{(2)}+\theta_{3}^{(2)} a_{3}^{(2)}\right)\)</span></p><p>æˆ‘ä»¬å¯ä»¥æŠŠ <span class="math inline">\(a_{0}, a_{1}, a_{2}, a_{3}\)</span> çœ‹æˆæ›´ä¸ºé«˜çº§çš„ç‰¹å¾å€¼, ä¹Ÿå°±æ˜¯ <span class="math inline">\(x_{0}, x_{1}, x_{2}, x_{3}\)</span> çš„è¿›åŒ–ä½“, å¹¶ä¸”å®ƒä»¬æ˜¯ç”± <span class="math inline">\(x\)</span> ä¸å†³å®šçš„, å› ä¸ºæ˜¯æ¢¯åº¦ä¸‹é™çš„ï¼Œæ‰€ä»¥ <span class="math inline">\(a\)</span> æ˜¯å˜åŒ–çš„ï¼Œå¹¶ä¸”å˜å¾—è¶Šæ¥è¶Šå‰å®³ï¼Œæ‰€ä»¥è¿™äº›æ›´é«˜çº§çš„ç‰¹å¾å€¼è¿œæ¯”ä»…ä»…å°† <span class="math inline">\(x\)</span> æ¬¡æ–¹å‰å®³ï¼Œä¹Ÿèƒ½æ›´å¥½çš„é¢„æµ‹æ–°æ•°æ®ã€‚è¿™å°±æ˜¯ç¥ç»ç½‘ç»œç›¸æ¯”äºé€»è¾‘å›å½’å’Œçº¿æ€§å›å½’çš„ä¼˜åŠ¿ã€‚</p><h2 id="ç‰¹å¾å’Œç›´è§‚ç†è§£-1">4.ç‰¹å¾å’Œç›´è§‚ç†è§£ 1</h2><p>ç¥ç»ç½‘ç»œä¸­ï¼Œå•å±‚ç¥ç»å…ƒï¼ˆæ— ä¸­é—´å±‚ï¼‰çš„è®¡ç®—å¯ç”¨æ¥è¡¨ç¤ºé€»è¾‘è¿ç®—ï¼Œæ¯”å¦‚é€»è¾‘ä¸ï¼ˆANDï¼‰ã€ é€»è¾‘æˆ–ï¼ˆORï¼‰ã€‚</p><p>ä¸¾ä¾‹è¯´æ˜:é€»è¾‘ä¸ï¼ˆANDï¼‰;ä¸‹å›¾ä¸­å·¦åŠéƒ¨åˆ†æ˜¯ç¥ç»ç½‘ç»œçš„è®¾è®¡ä¸ output å±‚è¡¨è¾¾å¼ï¼Œå³è¾¹ ä¸Šéƒ¨åˆ†æ˜¯ sigmod å‡½æ•°ï¼Œä¸‹åŠéƒ¨åˆ†æ˜¯çœŸå€¼è¡¨ã€‚</p><p>æˆ‘ä»¬å¯ä»¥ç”¨è¿™æ ·çš„ä¸€ä¸ªç¥ç»ç½‘ç»œè¡¨ç¤º AND å‡½æ•°:</p><figure><img src="https://cdn.jsdelivr.net/gh/ZqtCtios/Image/img/20201206194031.png" alt="ç¥ç»ç½‘ç»œè¡¨ç¤º AND å‡½æ•°"><figcaption>ç¥ç»ç½‘ç»œè¡¨ç¤º AND å‡½æ•°</figcaption></figure><p>å…¶ä¸­ <span class="math inline">\(\theta_{0}=-30, \theta_{1}=20, \theta_{2}=20\)</span> æˆ‘ä»¬çš„è¾“å‡ºå‡½æ•° <span class="math inline">\(h_{\theta}(x)\)</span> å³ä¸º: <span class="math inline">\(h_{\theta}(x)=g\left(-30+20 x_{1}+20 x_{2}\right)\)</span></p><p>æˆ‘ä»¬çŸ¥é“ <span class="math inline">\(g(x)\)</span> çš„å›¾åƒæ˜¯:</p><figure><img src="https://cdn.jsdelivr.net/gh/ZqtCtios/Image/img/20201206194157.png" alt="Sigmoid Function"><figcaption>Sigmoid Function</figcaption></figure><figure><img src="https://cdn.jsdelivr.net/gh/ZqtCtios/Image/img/20201206223530.png" alt="image-20201206194239927"><figcaption>image-20201206194239927</figcaption></figure><p>æ‰€ä»¥æˆ‘ä»¬æœ‰: <span class="math inline">\(h_{\theta}(x) \approx \mathrm{x}_{1} \mathrm{AND} \mathrm{x}_{2}\)</span> æ¥ä¸‹æ¥å†ä»‹ç»ä¸€ä¸ª OR å‡½æ•°:</p><figure><img src="https://cdn.jsdelivr.net/gh/ZqtCtios/Image/img/20201206194319.png" alt="OR å‡½æ•°"><figcaption>OR å‡½æ•°</figcaption></figure><h2 id="æ ·æœ¬å’Œç›´è§‚ç†è§£-ii">5.æ ·æœ¬å’Œç›´è§‚ç†è§£ II</h2><p>äºŒå…ƒé€»è¾‘è¿ç®—ç¬¦ï¼ˆBINARY LOGICAL OPERATORSï¼‰å½“è¾“å…¥ç‰¹å¾ä¸ºå¸ƒå°”å€¼ï¼ˆ0 æˆ– 1ï¼‰æ—¶ï¼Œæˆ‘ ä»¬å¯ä»¥ç”¨ä¸€ä¸ªå•ä¸€çš„æ¿€æ´»å±‚å¯ä»¥ä½œä¸ºäºŒå…ƒé€»è¾‘è¿ç®—ç¬¦ï¼Œä¸ºäº†è¡¨ç¤ºä¸åŒçš„è¿ç®—ç¬¦ï¼Œæˆ‘ä»¬åªéœ€è¦ é€‰æ‹©ä¸åŒçš„æƒé‡å³å¯ã€‚</p><p>ä¸‹å›¾çš„ç¥ç»å…ƒï¼ˆä¸‰ä¸ªæƒé‡åˆ†åˆ«ä¸º-30ï¼Œ20ï¼Œ20ï¼‰å¯ä»¥è¢«è§†ä¸ºä½œç”¨åŒäºé€»è¾‘ä¸ï¼ˆANDï¼‰:</p><figure><img src="https://cdn.jsdelivr.net/gh/ZqtCtios/Image/img/20201206222420.png" alt="AND"><figcaption>AND</figcaption></figure><p>ä¸‹å›¾çš„ç¥ç»å…ƒï¼ˆä¸‰ä¸ªæƒé‡åˆ†åˆ«ä¸º-10ï¼Œ20ï¼Œ20ï¼‰å¯ä»¥è¢«è§†ä¸ºä½œç”¨ç­‰åŒäºé€»è¾‘æˆ–ï¼ˆORï¼‰:</p><figure><img src="https://cdn.jsdelivr.net/gh/ZqtCtios/Image/img/20201206223540.png" alt="OR"><figcaption>OR</figcaption></figure><p>ä¸‹å›¾çš„ç¥ç»å…ƒï¼ˆä¸¤ä¸ªæƒé‡åˆ†åˆ«ä¸º 10ï¼Œ-20ï¼‰å¯ä»¥è¢«è§†ä¸ºä½œç”¨ç­‰åŒäºé€»è¾‘éï¼ˆNOTï¼‰:</p><figure><img src="https://cdn.jsdelivr.net/gh/ZqtCtios/Image/img/20201206223543.png" alt="NOT"><figcaption>NOT</figcaption></figure><p>æˆ‘ä»¬å¯ä»¥åˆ©ç”¨ç¥ç»å…ƒæ¥ç»„åˆæˆæ›´ä¸ºå¤æ‚çš„ç¥ç»ç½‘ç»œä»¥å®ç°æ›´å¤æ‚çš„è¿ç®—ã€‚ä¾‹å¦‚æˆ‘ä»¬è¦å®ç° XNOR åŠŸèƒ½ï¼ˆè¾“å…¥çš„ä¸¤ä¸ªå€¼å¿…é¡»ä¸€æ ·ï¼Œå‡ä¸º 1 æˆ–å‡ä¸º 0ï¼‰ï¼Œå³: <span class="math display">\[\mathrm{XNOR}=\left(\mathrm{x}_{1} \mathrm{AND} \mathrm{x}_{2}\right) \mathrm{OR}\left(\left(\mathrm{NOT} \mathrm{x}_{1}\right) \mathrm{AND}\left(\mathrm{NOT} \mathrm{x}_{2}\right)\right)\]</span> é¦–å…ˆæ„é€ ä¸€ä¸ªèƒ½è¡¨è¾¾<span class="math inline">\((NOTx_{1}) AND(NOT x_{2})\)</span> éƒ¨åˆ†çš„ç¥ç»å…ƒ:</p><figure><img src="https://cdn.jsdelivr.net/gh/ZqtCtios/Image/img/20201206223611.png" alt="AND"><figcaption>AND</figcaption></figure><p>ç„¶åå°†è¡¨ç¤º AND çš„ç¥ç»å…ƒå’Œè¡¨ç¤º <span class="math inline">\(\left(\mathrm{NOT} \mathrm{x}_{1}\right) \mathrm{AND}\left(\mathrm{NOT} \mathrm{x}_{2}\right)\)</span> çš„ç¥ç»å…ƒä»¥åŠè¡¨ç¤º <span class="math inline">\(\mathrm{OR}\)</span> çš„ç¥ç»å…ƒè¿›è¡Œç»„åˆ:</p><figure><img src="https://cdn.jsdelivr.net/gh/ZqtCtios/Image/img/20201206222706.png" alt="XNOR"><figcaption>XNOR</figcaption></figure><p>æŒ‰è¿™ç§æ–¹æ³•æˆ‘ä»¬å¯ä»¥é€æ¸æ„é€ å‡ºè¶Šæ¥è¶Šå¤æ‚çš„å‡½æ•°ï¼Œä¹Ÿèƒ½å¾—åˆ°æ›´åŠ å‰å®³çš„ç‰¹å¾å€¼ã€‚ è¿™å°±æ˜¯ç¥ç»ç½‘ç»œçš„å‰å®³ä¹‹å¤„ã€‚</p><h2 id="å¤šç±»åˆ†ç±»">6.å¤šç±»åˆ†ç±»</h2><p>å½“æˆ‘ä»¬æœ‰ä¸æ­¢ä¸¤ç§åˆ†ç±»æ—¶ ï¼ˆä¹Ÿå°±æ˜¯ $y=1,2,3 <span class="math inline">\(.ï¼‰æ¯”å¦‚ä»¥ä¸‹è¿™ç§æƒ…å†µï¼Œè¯¥æ€ä¹ˆåŠï¼Ÿå¦‚æœæˆ‘ä»¬è¦è®­ç»ƒä¸€ä¸ªç¥ç»ç½‘ç»œç®—æ³•æ¥è¯†åˆ«è·¯äººã€æ±½è½¦ã€æ‘©æ‰˜è½¦å’Œå¡è½¦ï¼Œåœ¨è¾“å‡ºå±‚æˆ‘ä»¬åº”è¯¥æœ‰ 4 ä¸ªå€¼ã€‚ä¾‹å¦‚ï¼Œç¬¬ä¸€ä¸ªå€¼ä¸º 1 æˆ– 0 ç”¨äºé¢„æµ‹æ˜¯å¦æ˜¯è¡Œäººï¼Œç¬¬äºŒä¸ªå€¼ç”¨äºåˆ¤æ–­æ˜¯å¦ä¸ºæ±½è½¦ã€‚è¾“å…¥å‘é‡xæœ‰ä¸‰ä¸ªç»´åº¦ï¼Œä¸¤ä¸ªä¸­é—´å±‚ï¼Œè¾“å‡ºå±‚ 4 ä¸ªç¥ç»å…ƒåˆ†åˆ«ç”¨æ¥è¡¨ç¤º 4 ç±»ï¼Œä¹Ÿå°±æ˜¯æ¯ä¸€ä¸ªæ•°æ®åœ¨è¾“å‡ºå±‚éƒ½ä¼šå‡ºç°\)</span>[a,b,c,d]^{T},$ ä¸” <span class="math inline">\(a, b, c, d\)</span> ä¸­ä»…æœ‰ä¸€ä¸ªä¸º <span class="math inline">\(1,\)</span> è¡¨ç¤ºå½“å‰ç±»ã€‚ä¸‹é¢æ˜¯è¯¥ç¥ç»ç½‘ç»œçš„å¯èƒ½ç»“æ„ç¤ºä¾‹:</p><figure><img src="https://cdn.jsdelivr.net/gh/ZqtCtios/Image/img/20201206223146.png" alt="å¤šç±»åˆ†ç±»ç½‘ç»œ"><figcaption>å¤šç±»åˆ†ç±»ç½‘ç»œ</figcaption></figure>]]></content>
      
      
      <categories>
          
          <category> å´æ©è¾¾â€”â€”æœºå™¨å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æœºå™¨å­¦ä¹  </tag>
            
            <tag> å´æ©è¾¾ </tag>
            
            <tag> ç¥ç»ç½‘ç»œ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>02_é€»è¾‘å›å½’_Logistic_Regression</title>
      <link href="2020/12/03/machinelearning/wu-en-da-ji-qi-xue-xi/logistic-regression/"/>
      <url>2020/12/03/machinelearning/wu-en-da-ji-qi-xue-xi/logistic-regression/</url>
      
        <content type="html"><![CDATA[<h1 id="é€»è¾‘å›å½’logistic-regression">é€»è¾‘å›å½’ï¼ˆLogistic Regressionï¼‰</h1><h2 id="åˆ†ç±»é—®é¢˜classification">1.åˆ†ç±»é—®é¢˜ï¼ˆClassificationï¼‰</h2><p>åˆ†ç±»é—®é¢˜ä¸­ï¼Œéœ€è¦é¢„æµ‹çš„å˜é‡yæ˜¯ç¦»æ•£çš„å€¼</p><h2 id="å‡è¯´è¡¨ç¤º">2.å‡è¯´è¡¨ç¤º</h2><p>é€»è¾‘å›å½’æ¨¡å‹çš„å‡è®¾æ˜¯: <span class="math inline">\(\quad h_{\theta}(x)=g\left(\theta^{T} X\right)\)</span> å…¶ä¸­: <span class="math inline">\(\quad X\)</span> ä»£è¡¨ç‰¹å¾å‘é‡ <span class="math inline">\(g\)</span> ä»£è¡¨é€»è¾‘å‡½æ•°ï¼ˆlogistic function)æ˜¯ä¸€ä¸ªå¸¸ç”¨çš„é€»è¾‘å‡½æ•°ä¸º S å½¢å‡½æ•°(Sigmoid function)ï¼Œå…¬å¼ä¸º: <span class="math display">\[g(z)=\frac{1}{1+e^{-z}}\]</span></p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> numpy <span class="token keyword">as</span> np <span class="token keyword">def</span> <span class="token function">sigmoid</span><span class="token punctuation">(</span>z<span class="token punctuation">)</span><span class="token punctuation">:</span>  <span class="token keyword">return</span> <span class="token number">1</span> <span class="token operator">/</span> <span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">+</span> np<span class="token punctuation">.</span>exp<span class="token punctuation">(</span><span class="token operator">-</span>z<span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p><span class="math inline">\(h_{\theta}(x)\)</span> çš„ä½œç”¨æ˜¯ï¼Œå¯¹äºç»™å®šçš„è¾“å…¥å˜é‡ï¼Œæ ¹æ®é€‰æ‹©çš„å‚æ•°è®¡ç®—è¾“å‡ºå˜é‡=1 çš„å¯èƒ½æ€§(estimated probablity) å³ <span class="math inline">\(h_{\theta}(x)=P(y=1 \mid x ; \theta)\)</span> ä¾‹å¦‚ï¼Œå¦‚æœå¯¹äºç»™å®šçš„ <span class="math inline">\(x,\)</span> é€šè¿‡å·²ç»ç¡®å®šçš„å‚æ•°è®¡ç®—å¾—å‡º <span class="math inline">\(h_{\theta}(x)=0.7,\)</span> åˆ™è¡¨ç¤ºæœ‰ <span class="math inline">\(70 \%\)</span> çš„å‡ ç‡ <span class="math inline">\(y\)</span> ä¸ºæ­£å‘ç±»ï¼Œç›¸åº”åœ° <span class="math inline">\(y\)</span> ä¸ºè´Ÿå‘ç±»çš„å‡ ç‡ä¸º 1-0.7=0.3ã€‚</p><h2 id="åˆ¤å®šè¾¹ç•Œdecision-boundary">3.åˆ¤å®šè¾¹ç•ŒDecision Boundary</h2><p>ç°åœ¨å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªæ¨¡å‹:</p><figure><img src="https://cdn.jsdelivr.net/gh/ZqtCtios/Image/img/20201205224807.png" alt="image-20201205224807126"><figcaption>image-20201205224807126</figcaption></figure><p>å¯ä»¥é€‰ç›´çº¿ï¼š</p><figure><img src="https://cdn.jsdelivr.net/gh/ZqtCtios/Image/img/20201205224836.png" alt="image-20201205224836663"><figcaption>image-20201205224836663</figcaption></figure><p>ä½†å…¶ä»–çš„æ¯”å¦‚è¾¹ç•Œçš„åœ†å½¢ï¼š</p><figure><img src="https://cdn.jsdelivr.net/gh/ZqtCtios/Image/img/20201205224903.png" alt="image-20201205224903704"><figcaption>image-20201205224903704</figcaption></figure><p>æˆ‘ä»¬å¯ä»¥ç”¨éå¸¸å¤æ‚çš„æ¨¡å‹æ¥é€‚åº”éå¸¸å¤æ‚å½¢çŠ¶çš„åˆ¤å®šè¾¹ç•Œ</p><h2 id="ä»£ä»·å‡½æ•°cost-function">4.ä»£ä»·å‡½æ•°Cost Function</h2><p>å¦‚ä½•æ‹Ÿåˆé€»è¾‘å›å½’æ¨¡å‹çš„å‚æ•°ğœƒã€‚å…·ä½“æ¥è¯´ï¼Œæ‹Ÿåˆå‚æ•°çš„ä¼˜åŒ–ç›®æ ‡æˆ–è€…å«ä»£ä»·å‡½æ•°ï¼Œè¿™ä¾¿æ˜¯ç›‘ç£å­¦ä¹ é—®é¢˜ä¸­çš„é€»è¾‘å›å½’æ¨¡å‹çš„æ‹Ÿåˆé—®é¢˜ã€‚</p><p>å¯¹äºçº¿æ€§å›å½’æ¨¡å‹ï¼Œæˆ‘ä»¬å®šä¹‰çš„ä»£ä»·å‡½æ•°æ˜¯æ‰€æœ‰æ¨¡å‹è¯¯å·®çš„å¹³æ–¹å’Œã€‚ç†è®ºä¸Šæ¥è¯´ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥å¯¹é€»è¾‘å›å½’æ¨¡å‹æ²¿ç”¨è¿™ä¸ªå®šä¹‰ï¼Œä½†æ˜¯é—®é¢˜åœ¨äºï¼Œå½“æˆ‘ä»¬å°† <span class="math inline">\(h_{\theta}(x)=\frac{1}{1+e^{-\theta} T_{X}}\)</span> å¸¦å…¥åˆ°è¿™æ ·å®šä¹‰äº†çš„ä»£ä»·å‡½æ•°ä¸­æ—¶ï¼Œæˆ‘ä»¬å¾—åˆ°çš„ä»£ä»·å‡½æ•°å°†æ˜¯ä¸€ä¸ªéå‡¸å‡½æ•°ï¼ˆnon-convexfunctionï¼‰ï¼Œè¿™æ„å‘³ç€æˆ‘ä»¬çš„ä»£ä»·å‡½æ•°æœ‰è®¸å¤šå±€éƒ¨æœ€å°å€¼ï¼Œè¿™å°†å½±å“æ¢¯åº¦ä¸‹é™ç®—æ³•å¯»æ‰¾å…¨å±€æœ€å°å€¼ã€‚</p><figure><img src="https://cdn.jsdelivr.net/gh/ZqtCtios/Image/img/20201205225126.png" alt="image-20201205225126378"><figcaption>image-20201205225126378</figcaption></figure><p>çº¿æ€§å›å½’çš„ä»£ä»·å‡½æ•°ä¸º: <span class="math display">\[J(\theta)=\frac{1}{m} \sum_{i=1}^{m} \frac{1}{2}\left(h_{\theta}\left(x^{(i)}\right)-y^{(i)}\right)^{2}\]</span> æˆ‘ä»¬é‡æ–°å®šä¹‰é€»è¾‘å›å½’çš„ä»£ä»·å‡½æ•°ä¸º: <span class="math display">\[J(\theta)=\frac{1}{m} \sum_{i=1}^{m} \operatorname{cost}\left(h_{\theta}\left(x^{(i)}\right), y^{(i)}\right)\]</span> å…¶ä¸­ï¼Œ <span class="math display">\[\operatorname{cost}\left(h_{\theta}(x), y\right)=\left\{\begin{aligned}-\log \left(h_{\theta}(x)\right) &amp; \text { if } y=1 \\-\log \left(1-h_{\theta}(x)\right) &amp; \text { if } y=0\end{aligned}\right.\]</span> <span class="math inline">\(h_{\theta}(x)\)</span> ä¸ <span class="math inline">\(\operatorname{cost}\left(h_{\theta}(x), y\right)\)</span> ä¹‹é—´çš„å…³ç³»å¦‚ä¸‹å›¾æ‰€ç¤º:</p><figure><img src="https://cdn.jsdelivr.net/gh/ZqtCtios/Image/img/20201205225317.png" alt="image-20201205225317462"><figcaption>image-20201205225317462</figcaption></figure><p>è¿™æ ·æ„å»ºçš„ <span class="math inline">\(\operatorname{cost}\left(h_{\theta}(x), y\right)\)</span> å‡½æ•°çš„ç‰¹ç‚¹æ˜¯ï¼šå½“å®é™…çš„ <span class="math inline">\(y=1\)</span> ä¸” <span class="math inline">\(h_{\theta}(x)\)</span> ä¹Ÿä¸º 1 æ—¶è¯¯å·®ä¸º 0 ,å½“ <span class="math inline">\(y=1\)</span> ä½† <span class="math inline">\(h_{\theta}(x)\)</span> ä¸ä¸º 1 æ—¶è¯¯å·®éšç€ <span class="math inline">\(h_{\theta}(x)\)</span> å˜å°è€Œå˜å¤§; å½“å®é™…çš„ <span class="math inline">\(y=0\)</span> ä¸” <span class="math inline">\(h_{\theta}(x)\)</span> ä¹Ÿä¸º 0 æ—¶ä»£ä»·ä¸º <span class="math inline">\(0,\)</span> å½“ <span class="math inline">\(y=0\)</span> ä½† <span class="math inline">\(h_{\theta}(x)\)</span> ä¸ä¸º 0 æ—¶è¯¯å·®éšç€ <span class="math inline">\(h_{\theta}(x)\)</span> çš„å˜å¤§è€Œå˜å¤§ã€‚å°†æ„å»ºçš„ <span class="math inline">\(\operatorname{cost}\left(h_{\theta}(x), y\right)\)</span> ç®€åŒ–å¦‚ä¸‹: <span class="math display">\[\operatorname{cost}\left(h_{\theta}(x), y\right)=-y \times \log \left(h_{\theta}(x)\right)-(1-y) \times \log \left(1-h_{\theta}(x)\right)\]</span> å¸¦å…¥ä»£ä»·å‡½æ•°å¾—åˆ°: <span class="math display">\[J(\theta)=\frac{1}{m} \sum_{i=1}^{m}\left[-y^{(i)} \log \left(h_{\theta}\left(x^{(i)}\right)\right)-\left(1-y^{(i)}\right) \log \left(1-h_{\theta}\left(x^{(i)}\right)\right)\right]\]</span> å³: <span class="math display">\[J(\theta)=-\frac{1}{m} \sum_{i=1}^{m}\left[y^{(i)} \log \left(h_{\theta}\left(x^{(i)}\right)\right)+\left(1-y^{(i)}\right) \log \left(1-h_{\theta}\left(x^{(i)}\right)\right)\right]\]</span> Pythonä»£ç å®ç°ä¸ºï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> numpy <span class="token keyword">as</span> np <span class="token keyword">def</span> <span class="token function">cost</span><span class="token punctuation">(</span>theta<span class="token punctuation">,</span> X<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">:</span>  theta <span class="token operator">=</span> np<span class="token punctuation">.</span>matrix<span class="token punctuation">(</span>theta<span class="token punctuation">)</span>  X <span class="token operator">=</span> np<span class="token punctuation">.</span>matrix<span class="token punctuation">(</span>X<span class="token punctuation">)</span>  y <span class="token operator">=</span> np<span class="token punctuation">.</span>matrix<span class="token punctuation">(</span>y<span class="token punctuation">)</span>  first <span class="token operator">=</span> np<span class="token punctuation">.</span>multiply<span class="token punctuation">(</span><span class="token operator">-</span>y<span class="token punctuation">,</span> np<span class="token punctuation">.</span>log<span class="token punctuation">(</span>sigmoid<span class="token punctuation">(</span>X<span class="token operator">*</span> theta<span class="token punctuation">.</span>T<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  second <span class="token operator">=</span> np<span class="token punctuation">.</span>multiply<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">-</span> y<span class="token punctuation">)</span><span class="token punctuation">,</span> np<span class="token punctuation">.</span>log<span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">-</span> sigmoid<span class="token punctuation">(</span>X<span class="token operator">*</span> theta<span class="token punctuation">.</span>T<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span> np<span class="token punctuation">.</span><span class="token builtin">sum</span><span class="token punctuation">(</span>first <span class="token operator">-</span> second<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>X<span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>åœ¨å¾—åˆ°è¿™æ ·ä¸€ä¸ªä»£ä»·å‡½æ•°ä»¥åï¼Œæˆ‘ä»¬ä¾¿å¯ä»¥ç”¨æ¢¯åº¦ä¸‹é™ç®—æ³•æ¥æ±‚å¾—èƒ½ä½¿ä»£ä»·å‡½æ•°æœ€å°çš„å‚æ•°äº†ã€‚ç®—æ³•ä¸º: <span class="math display">\[\theta_{j}:=\theta_{j}-\alpha \frac{\partial}{\partial \theta_{j}} J(\theta)\]</span> æ±‚å¯¼åï¼š <span class="math display">\[\theta_{j}:=\theta_{j}-\alpha \frac{1}{m} \sum_{i=1}^{m}\left(h_{\theta}\left(\mathrm{x}^{(i)}\right)-\mathrm{y}^{(i)}\right) \mathrm{x}_{j}^{(i)}\]</span> ä»£ä»·å‡½æ•°ğ½(ğœƒ)ä¼šæ˜¯ä¸€ ä¸ªå‡¸å‡½æ•°ï¼Œå¹¶ä¸”æ²¡æœ‰å±€éƒ¨æœ€ä¼˜å€¼ã€‚æ¨å¯¼è¿‡ç¨‹:</p><figure><img src="https://cdn.jsdelivr.net/gh/ZqtCtios/Image/img/20201205230522.png" alt="image-20201205230522918"><figcaption>image-20201205230522918</figcaption></figure><p>æ‰€ä»¥ï¼š</p><figure><img src="https://cdn.jsdelivr.net/gh/ZqtCtios/Image/img/20201205230500.png" alt="image-20201205230500427"><figcaption>image-20201205230500427</figcaption></figure><p>è™½ç„¶å¾—åˆ°çš„æ¢¯åº¦ä¸‹é™ç®—æ³•è¡¨é¢ä¸Šçœ‹ä¸Šå»ä¸çº¿æ€§å›å½’çš„æ¢¯åº¦ä¸‹é™ç®—æ³•ä¸€æ ·ï¼Œä½†æ˜¯è¿™é‡Œçš„<span class="math inline">\(h_ğœƒ(ğ‘¥) = ğ‘”(ğœƒ^ğ‘‡ğ‘‹)\)</span>ä¸çº¿æ€§å›å½’ä¸­ä¸åŒï¼Œæ‰€ä»¥å®é™…ä¸Šæ˜¯ä¸ä¸€æ ·çš„ã€‚å¦å¤–ï¼Œåœ¨è¿è¡Œæ¢¯åº¦ä¸‹é™ç®—æ³• ä¹‹å‰ï¼Œè¿›è¡Œç‰¹å¾ç¼©æ”¾ä¾æ—§æ˜¯éå¸¸å¿…è¦çš„ã€‚ä¸€äº›æ¢¯åº¦ä¸‹é™ç®—æ³•ä¹‹å¤–çš„é€‰æ‹©: é™¤äº†æ¢¯åº¦ä¸‹é™ç®—æ³•ä»¥å¤–ï¼Œè¿˜æœ‰ä¸€äº›å¸¸è¢«ç”¨æ¥ä»¤ä»£ä»·å‡½æ•°æœ€å°çš„ç®—æ³•ï¼Œè¿™äº›ç®—æ³•æ›´åŠ å¤æ‚å’Œä¼˜è¶Šï¼Œè€Œä¸”é€šå¸¸ä¸éœ€è¦äººå·¥é€‰æ‹©å­¦ä¹ ç‡ï¼Œé€šå¸¸æ¯”æ¢¯åº¦ä¸‹é™ç®—æ³•è¦æ›´åŠ å¿«é€Ÿã€‚è¿™äº›ç®—æ³•æœ‰:å…±è½­æ¢¯åº¦ï¼ˆConjugate Gradientï¼‰ï¼Œå±€éƒ¨ä¼˜åŒ–æ³•ï¼ˆBroyden fletcher goldfarb shann,BFGSï¼‰å’Œæœ‰é™å†…å­˜å±€éƒ¨ä¼˜åŒ–æ³•ï¼ˆLBFGSï¼‰</p><h2 id="æ¢¯åº¦ä¸‹é™">5.æ¢¯åº¦ä¸‹é™</h2><p>å’Œä¹‹å‰çš„çº¿æ€§å›å½’ç±»ä¼¼: <span class="math display">\[\theta_{j}:=\theta_{j}-\alpha \frac{1}{m} \sum_{i=1}^{m}\left(h_{\theta}\left(x^{(i)}\right)-y^{(i)}\right) x_{j}^{(i)}\]</span> ä½†æ˜¯ç°åœ¨é€»è¾‘å‡½æ•°å‡è®¾å‡½æ•°: <span class="math inline">\(h_{\theta}(x)=\frac{1}{1+e^{-\theta} T_{X}}\)</span>ï¼Œå³ä½¿æ›´æ–°å‚æ•°çš„è§„åˆ™çœ‹èµ·æ¥åŸºæœ¬ç›¸åŒï¼Œä½†ç”±äºå‡è®¾çš„å®šä¹‰å‘ç”Ÿäº†å˜åŒ–ï¼Œæ‰€ä»¥é€»è¾‘å‡½æ•°çš„æ¢¯åº¦ä¸‹é™ï¼Œè·Ÿçº¿æ€§å›å½’çš„æ¢¯åº¦ä¸‹é™å®é™…ä¸Šæ˜¯ä¸¤ä¸ªå®Œå…¨ä¸åŒçš„ä¸œè¥¿ã€‚</p><h2 id="é«˜çº§ä¼˜åŒ–">6.é«˜çº§ä¼˜åŒ–</h2><p>ç„¶è€Œæ¢¯åº¦ä¸‹é™å¹¶ä¸æ˜¯æˆ‘ä»¬å¯ä»¥ä½¿ç”¨çš„å”¯ä¸€ç®—æ³•ï¼Œè¿˜æœ‰å…¶ä»–ä¸€äº›ç®—æ³•ï¼Œæ›´é«˜çº§ã€æ›´å¤æ‚ã€‚å¦‚æœæˆ‘ä»¬èƒ½ç”¨è¿™äº›æ–¹æ³•æ¥è®¡ç®—ä»£ä»·å‡½æ•° <span class="math inline">\(J(\theta)\)</span> å’Œåå¯¼æ•°é¡¹ <span class="math inline">\(\frac{\partial}{\partial \theta_{j}} J(\theta)\)</span> ä¸¤ä¸ªé¡¹çš„è¯ï¼Œé‚£ä¹ˆè¿™äº›ç®—æ³•å°±æ˜¯ä¸ºæˆ‘ä»¬ä¼˜åŒ–ä»£ä»·å‡½æ•°çš„ä¸åŒæ–¹æ³•ï¼Œå…±è½©æ¢¯åº¦æ³• BFGS ï¼ˆå˜å°ºåº¦æ³•ï¼‰å’Œ L-BFGS ï¼ˆé™åˆ¶å˜å°ºåº¦æ³•ï¼‰å°±æ˜¯å…¶ä¸­ä¸€äº›æ›´é«˜çº§çš„ä¼˜åŒ–ç®—æ³•ï¼Œå®ƒä»¬éœ€è¦æœ‰ä¸€ç§æ–¹æ³•æ¥è®¡ç®— ğ½(ğœƒ)ï¼Œä»¥åŠéœ€è¦ä¸€ç§æ–¹æ³• è®¡ç®—å¯¼æ•°é¡¹ï¼Œç„¶åä½¿ç”¨æ¯”æ¢¯åº¦ä¸‹é™æ›´å¤æ‚çš„ç®—æ³•æ¥æœ€å°åŒ–ä»£ä»·å‡½æ•°ã€‚</p><h2 id="å¤šç±»åˆ«åˆ†ç±»ä¸€å¯¹å¤š">7.å¤šç±»åˆ«åˆ†ç±»:ä¸€å¯¹å¤š</h2><p>ç„¶è€Œå¯¹äºä¹‹å‰çš„ä¸€ä¸ªï¼ŒäºŒå…ƒåˆ†ç±»é—®é¢˜ï¼Œæˆ‘ä»¬çš„æ•°æ®çœ‹èµ·æ¥å¯èƒ½æ˜¯åƒè¿™æ ·:</p><figure><img src="https://cdn.jsdelivr.net/gh/ZqtCtios/Image/img/20201206000542.png" alt="image-20201206000542702"><figcaption>image-20201206000542702</figcaption></figure><p>å¯¹äºä¸€ä¸ªå¤šç±»åˆ†ç±»é—®é¢˜ï¼Œæˆ‘ä»¬çš„æ•°æ®é›†æˆ–è®¸çœ‹èµ·æ¥åƒè¿™æ ·:</p><figure><img src="https://cdn.jsdelivr.net/gh/ZqtCtios/Image/img/20201206000556.png" alt="image-20201206000556885"><figcaption>image-20201206000556885</figcaption></figure><p>æˆ‘ä»¬ç°åœ¨å·²ç»çŸ¥é“å¦‚ä½•è¿›è¡ŒäºŒå…ƒåˆ†ç±»ï¼Œå¯ä»¥ä½¿ç”¨é€»è¾‘å›å½’ï¼Œå¯¹äºç›´çº¿æˆ–è®¸ä½ ä¹ŸçŸ¥é“ï¼Œå¯ä»¥å°†æ•°æ®é›†ä¸€åˆ†ä¸ºäºŒä¸ºæ­£ç±»å’Œè´Ÿç±»ã€‚ç”¨ä¸€å¯¹å¤šçš„åˆ†ç±»æ€æƒ³ï¼Œæˆ‘ä»¬å¯ä»¥å°†å…¶ç”¨åœ¨å¤šç±»åˆ†ç±»é—®é¢˜ ä¸Šã€‚ä¸‹é¢å°†ä»‹ç»å¦‚ä½•è¿›è¡Œä¸€å¯¹å¤šçš„åˆ†ç±»å·¥ä½œï¼Œæœ‰æ—¶è¿™ä¸ªæ–¹æ³•ä¹Ÿè¢«ç§°ä¸º"ä¸€å¯¹ä½™"æ–¹æ³•ã€‚</p><figure><img src="https://cdn.jsdelivr.net/gh/ZqtCtios/Image/img/20201206000949.png" alt="image-20201206000949232"><figcaption>image-20201206000949232</figcaption></figure><p>æ–¹æ³•å°±æ˜¯å°†å¤šåˆ†ç±»é—®é¢˜è½¬åŒ–æˆå¤šä¸ªäºŒåˆ†ç±»é—®é¢˜ï¼Œä¾‹å¦‚ä¸Šå›¾å…ˆæŠŠé™¤äº†ä¸‰è§’å½¢çš„å…¨è§†ä¸ºä¸€ç±»ï¼Œè½¬åŒ–æˆä¸€ä¸ªäºŒåˆ†ç±»é—®é¢˜ã€‚ä¸ºäº†èƒ½å®ç°è¿™æ ·çš„è½¬å˜ï¼Œæˆ‘ä»¬å°†å¤šä¸ªç±»ä¸­çš„ä¸€ä¸ªç±»æ ‡è®°ä¸ºæ­£å‘ç±»ï¼ˆ <span class="math inline">\(y=1\)</span>ï¼‰ ï¼Œç„¶åå°†å…¶ä»–æ‰€æœ‰ç±»éƒ½æ ‡è®°ä¸ºè´Ÿå‘ç±»ï¼Œè¿™ä¸ªæ¨¡å‹è®°ä½œ <span class="math inline">\(h_{\theta}^{(1)}(x)_{\circ}\)</span> æ¥ç€ï¼Œç±»ä¼¼åœ°ç¬¬æˆ‘ä»¬é€‰æ‹©å¦ä¸€ä¸ªç±»æ ‡è®°ä¸ºæ­£å‘ç±» <span class="math inline">\((y=2)\)</span> ï¼Œå†å°†å…¶å®ƒç±»éƒ½æ ‡è®°ä¸ºè´Ÿå‘ç±»ï¼Œå°†è¿™ä¸ªæ¨¡å‹è®°ä½œ <span class="math inline">\(h_{\theta}^{(2)}(x)\)</span>,ä¾æ­¤ç±»æ¨ã€‚æœ€åæˆ‘ä»¬å¾—åˆ°ä¸€ç³»åˆ—çš„æ¨¡å‹ç®€è®°ä¸º: <span class="math inline">\(\quad h_{\theta}^{(i)}(x)=p(y=i \mid x ; \theta)\)</span> å…¶ä¸­: <span class="math inline">\(i=(1,2,3 \ldots k)\)</span></p><figure><img src="https://cdn.jsdelivr.net/gh/ZqtCtios/Image/img/20201206001229.png" alt="image-20201206001229747"><figcaption>image-20201206001229747</figcaption></figure><p>æœ€åï¼Œå°†æ‰€æœ‰çš„åˆ†ç±»æœºéƒ½è¿è¡Œä¸€éï¼Œç„¶åå¯¹æ¯ä¸€ä¸ªè¾“å…¥å˜é‡ï¼Œ éƒ½é€‰æ‹©æœ€é«˜å¯èƒ½æ€§çš„è¾“å‡ºå˜é‡ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> å´æ©è¾¾â€”â€”æœºå™¨å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æœºå™¨å­¦ä¹  </tag>
            
            <tag> å´æ©è¾¾ </tag>
            
            <tag> é€»è¾‘å›å½’ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>01_1.2 A simple two-dimensional vector class</title>
      <link href="2020/12/02/python/fluentpython/chapter-03-dictionaries-and-sets/3.1-dict/"/>
      <url>2020/12/02/python/fluentpython/chapter-03-dictionaries-and-sets/3.1-dict/</url>
      
        <content type="html"><![CDATA[<blockquote></blockquote><h1 id="æ³›æ˜ å°„ç±»å‹">æ³›æ˜ å°„ç±»å‹</h1><ul><li>collections.abcä¸­æœ‰Mappingå’ŒMutableMappingè¿™ä¸¤ä¸ªæŠ½è±¡ç±»ï¼Œä½œç”¨dictçš„æ¥å£ <img src="https://cdn.jsdelivr.net/gh/ZqtCtios/Image/img/20201201112313.png" alt="Mutable Mapping"></li><li>dictåªæœ‰<strong>å¯æ•£åˆ—çš„</strong>æ•°æ®ç±»å‹æ‰èƒ½ä½œç”¨è¿™äº›æ˜ å°„é‡Œçš„é”®</li><li>å¯æ•£åˆ—å¯¹è±¡éœ€è¦å®ç°__hash__,__eq__</li><li>strï¼Œbytesï¼Œfrozensetæ˜¯å¯æ•£åˆ—çš„ï¼Œå¦‚æœtupleä¸­æ‰€æœ‰å…ƒç´ æ˜¯å¯æ•£åˆ—çš„ï¼Œé‚£ä¹ˆtupleä¹Ÿæ˜¯å¯æ•£åˆ—çš„</li><li>ä¸€èˆ¬ç”¨æˆ·è‡ªå®šä¹‰çš„ç±»å‹å¯¹è±¡éƒ½æ˜¯å¯æ•£åˆ—çš„ï¼Œid()å‡½æ•°çš„è¿”å›å€¼å°±æ˜¯æ•£åˆ—å€¼</li></ul><pre class="line-numbers language-python" data-language="python"><code class="language-python">tt<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">hash</span><span class="token punctuation">(</span>tt<span class="token punctuation">)</span><span class="token punctuation">)</span>tt<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">hash</span><span class="token punctuation">(</span>tt<span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><pre><code>-2725224101759650258---------------------------------------------------------------------------TypeError                                 Traceback (most recent call last)&lt;ipython-input-1-083a0773f165&gt; in &lt;module&gt;      2 print(hash(tt))      3 tt=(1,2,[3,4])----&gt; 4 print(hash(tt))TypeError: unhashable type: 'list'</code></pre><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># dictçš„åˆ›å»ºæ–¹å¼</span>a <span class="token operator">=</span> <span class="token builtin">dict</span><span class="token punctuation">(</span>one<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span> two<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">,</span> three<span class="token operator">=</span><span class="token number">3</span><span class="token punctuation">)</span>b <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">'one'</span><span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'two'</span><span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">'three'</span><span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">}</span>c <span class="token operator">=</span> <span class="token builtin">dict</span><span class="token punctuation">(</span><span class="token builtin">zip</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'one'</span><span class="token punctuation">,</span> <span class="token string">'two'</span><span class="token punctuation">,</span> <span class="token string">'three'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>d <span class="token operator">=</span> <span class="token builtin">dict</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token string">'two'</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token string">'one'</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token string">'three'</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span>e <span class="token operator">=</span> <span class="token builtin">dict</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">'three'</span><span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token string">'one'</span><span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'two'</span><span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">)</span>a<span class="token operator">==</span>b<span class="token operator">==</span>c<span class="token operator">==</span>d<span class="token operator">==</span>e<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre><code>True</code></pre><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># dict æ¨å¯¼</span>DIAL_CODES <span class="token operator">=</span> <span class="token punctuation">[</span>    <span class="token punctuation">(</span><span class="token number">86</span><span class="token punctuation">,</span> <span class="token string">'China'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    <span class="token punctuation">(</span><span class="token number">91</span><span class="token punctuation">,</span> <span class="token string">'India'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'United States'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    <span class="token punctuation">(</span><span class="token number">62</span><span class="token punctuation">,</span> <span class="token string">'Indonesia'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    <span class="token punctuation">(</span><span class="token number">55</span><span class="token punctuation">,</span> <span class="token string">'Brazil'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    <span class="token punctuation">(</span><span class="token number">92</span><span class="token punctuation">,</span> <span class="token string">'Pakistan'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    <span class="token punctuation">(</span><span class="token number">880</span><span class="token punctuation">,</span> <span class="token string">'Bangladesh'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    <span class="token punctuation">(</span><span class="token number">234</span><span class="token punctuation">,</span> <span class="token string">'Nigeria'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    <span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">,</span> <span class="token string">'Russia'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    <span class="token punctuation">(</span><span class="token number">81</span><span class="token punctuation">,</span> <span class="token string">'Japan'</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">]</span>country_code <span class="token operator">=</span> <span class="token punctuation">{</span>country<span class="token punctuation">:</span> code <span class="token keyword">for</span> code<span class="token punctuation">,</span> country <span class="token keyword">in</span> DIAL_CODES<span class="token punctuation">}</span><span class="token keyword">print</span><span class="token punctuation">(</span>country_code<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre><code>{'China': 86, 'India': 91, 'United States': 1, 'Indonesia': 62, 'Brazil': 55, 'Pakistan': 92, 'Bangladesh': 880, 'Nigeria': 234, 'Russia': 7, 'Japan': 81}</code></pre><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment">#d.get(k,default)æ¥ä»£æ›¿d[k],å¦‚æœæ²¡æœ‰æŸ¥æ‰¾åˆ°å°±è¿”å›é»˜è®¤å€¼</span><span class="token keyword">import</span> sys<span class="token keyword">import</span> reWORD_RE <span class="token operator">=</span> re<span class="token punctuation">.</span><span class="token builtin">compile</span><span class="token punctuation">(</span><span class="token string">r'\w+'</span><span class="token punctuation">)</span>index <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'poetry.txt'</span><span class="token punctuation">,</span> encoding<span class="token operator">=</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> fp<span class="token punctuation">:</span>    <span class="token keyword">for</span> line_no<span class="token punctuation">,</span> line <span class="token keyword">in</span> <span class="token builtin">enumerate</span><span class="token punctuation">(</span>fp<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">for</span> match <span class="token keyword">in</span> WORD_RE<span class="token punctuation">.</span>finditer<span class="token punctuation">(</span>line<span class="token punctuation">)</span><span class="token punctuation">:</span>            word <span class="token operator">=</span> match<span class="token punctuation">.</span>group<span class="token punctuation">(</span><span class="token punctuation">)</span>            column_no <span class="token operator">=</span> match<span class="token punctuation">.</span>start<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span>            location <span class="token operator">=</span> <span class="token punctuation">(</span>line_no<span class="token punctuation">,</span> column_no<span class="token punctuation">)</span>            occurrences <span class="token operator">=</span> index<span class="token punctuation">.</span>get<span class="token punctuation">(</span>word<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token comment">#</span>            occurrences<span class="token punctuation">.</span>append<span class="token punctuation">(</span>location<span class="token punctuation">)</span>            index<span class="token punctuation">[</span>word<span class="token punctuation">]</span> <span class="token operator">=</span> occurrences<span class="token keyword">for</span> word <span class="token keyword">in</span> <span class="token builtin">sorted</span><span class="token punctuation">(</span>index<span class="token punctuation">,</span> key<span class="token operator">=</span><span class="token builtin">str</span><span class="token punctuation">.</span>upper<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>word<span class="token punctuation">,</span> index<span class="token punctuation">[</span>word<span class="token punctuation">]</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre><code>a [(1, 22), (2, 7), (3, 6), (8, 7), (8, 27), (10, 19), (12, 6), (17, 20), (21, 19)]A [(17, 1)]above [(34, 34)]ago [(1, 29), (15, 36)]all [(26, 30), (43, 9)]and [(1, 13), (6, 17), (8, 15), (11, 6), (13, 16), (25, 21), (29, 13), (44, 37)]And [(5, 1), (15, 1), (20, 4), (34, 1), (41, 1), (43, 1)]angels [(24, 5), (34, 17)]Annabel [(4, 19), (11, 13), (18, 17), (29, 28), (37, 21), (40, 21), (42, 21)]as [(26, 27)]away [(20, 17)]be [(6, 21)]beams [(39, 20)]beautiful [(18, 7), (37, 11), (40, 11), (42, 11)]blew [(17, 8)]bore [(20, 8)]bride [(44, 44)]bright [(41, 42)]bringing [(39, 35)]But [(10, 1), (31, 1)]but [(41, 27)]by [(2, 17), (6, 30), (9, 20), (16, 20), (22, 20), (27, 20), (28, 37), (31, 30), (43, 40), (45, 27), (46, 16)]By [(4, 4)]came [(19, 30), (28, 15)]Can [(36, 1)]child [(8, 9), (8, 29)]chilling [(17, 29)]Chilling [(29, 4)]cloud [(17, 22), (28, 31)]Coveted [(13, 4)]darling [(44, 10), (44, 21)]demons [(35, 12)]dissever [(36, 10)]down [(35, 19), (43, 35)]dreams [(39, 47)]envying [(25, 9)]ever [(36, 5)]eyes [(41, 49)]far [(31, 33), (33, 12)]feel [(41, 33)]For [(39, 1)]from [(20, 22), (36, 27)]half [(24, 17)]happy [(24, 25)]Heaven [(12, 40), (24, 34), (34, 27)]her [(13, 12), (19, 9), (20, 13), (21, 9), (25, 17), (45, 7), (46, 7)]highborn [(19, 13)]I [(8, 1), (11, 4), (41, 31), (43, 29)]In [(2, 4), (9, 4), (16, 4), (22, 4), (27, 4), (45, 4), (46, 4)]in [(21, 16), (24, 31), (34, 24)]It [(1, 1)]it [(31, 14)]killing [(29, 17)]kingdom [(2, 9), (9, 12), (16, 12), (22, 12), (27, 12)]kinsmen [(19, 22)]know [(3, 40), (26, 38)]Lee [(4, 27), (11, 21), (18, 25), (29, 36), (37, 29), (40, 29), (42, 29)]lie [(43, 31)]life [(44, 32)]lived [(3, 21), (5, 21)]long [(15, 31)]love [(6, 12), (10, 21), (10, 45), (12, 8), (31, 9), (31, 46)]loved [(6, 24), (10, 8)]maiden [(3, 8), (5, 10)]many [(1, 8), (1, 17), (33, 7)]may [(3, 36)]me [(6, 33), (13, 20), (20, 27), (25, 25), (39, 44)]men [(26, 34)]moon [(39, 9)]more [(10, 35)]my [(11, 10), (29, 25), (36, 19), (44, 7), (44, 18), (44, 29), (44, 41)]My [(18, 4)]name [(4, 11)]neither [(34, 5)]never [(39, 14), (41, 15)]night [(28, 40), (43, 17)]no [(5, 32)]Nor [(35, 4)]not [(24, 13)]of [(4, 16), (12, 37), (17, 17), (28, 24)]Of [(32, 4), (33, 4), (37, 4), (40, 4), (42, 4), (44, 4)]older [(32, 22)]other [(5, 35)]our [(31, 5)]out [(17, 13), (28, 20)]reason [(15, 18), (26, 19)]rise [(41, 21)]sea [(2, 24), (9, 27), (16, 27), (22, 27), (27, 27), (35, 34), (45, 34), (46, 32)]sepulchre [(21, 21), (45, 11)]seraphs [(12, 29)]she [(5, 17), (8, 19)]shut [(21, 4)]side [(43, 47)]So [(19, 1)]so [(24, 22), (43, 5)]soul [(36, 22), (36, 36)]sounding [(46, 23)]stars [(41, 9)]stronger [(31, 21)]Than [(6, 4)]than [(10, 40), (31, 37), (32, 28), (33, 22)]That [(3, 1), (28, 1)]that [(10, 26), (12, 13), (15, 25), (19, 4), (26, 6)]the [(2, 20), (4, 7), (9, 23), (12, 18), (15, 14), (16, 23), (22, 23), (26, 15), (27, 23), (28, 6), (28, 27), (31, 42), (34, 13), (35, 8), (35, 30), (36, 32), (37, 7), (39, 5), (40, 7), (41, 5), (41, 38), (42, 7), (43, 13), (43, 43), (45, 30), (46, 19)]The [(24, 1)]there [(3, 15), (45, 21)]this [(5, 5), (9, 7), (15, 5), (16, 7), (22, 7), (27, 7)]those [(32, 7)]thought [(5, 41)]tide [(43, 23)]to [(6, 9)]To [(21, 1)]tomb [(46, 11)]under [(35, 24)]up [(21, 13)]was [(1, 4), (8, 3), (8, 23), (10, 31), (15, 10), (26, 11), (31, 17)]we [(10, 5), (32, 33), (33, 27)]Went [(25, 4)]were [(32, 17)]who [(32, 13)]whom [(3, 27)]wind [(17, 3), (28, 10)]wingÃ¨d [(12, 22)]wiser [(33, 16)]with [(5, 27), (10, 14)]With [(12, 1)]without [(39, 27)]year [(1, 24)]Yes [(26, 1)]you [(3, 32)]</code></pre><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment">#ç”¨setdefaultå¤„ç†æ‰¾ä¸åˆ°çš„é”®</span><span class="token keyword">import</span> sys<span class="token keyword">import</span> reWORD_RE <span class="token operator">=</span> re<span class="token punctuation">.</span><span class="token builtin">compile</span><span class="token punctuation">(</span><span class="token string">r'\w+'</span><span class="token punctuation">)</span>index <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'poetry.txt'</span><span class="token punctuation">,</span> encoding<span class="token operator">=</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> fp<span class="token punctuation">:</span>    <span class="token keyword">for</span> line_no<span class="token punctuation">,</span> line <span class="token keyword">in</span> <span class="token builtin">enumerate</span><span class="token punctuation">(</span>fp<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">for</span> match <span class="token keyword">in</span> WORD_RE<span class="token punctuation">.</span>finditer<span class="token punctuation">(</span>line<span class="token punctuation">)</span><span class="token punctuation">:</span>            word <span class="token operator">=</span> match<span class="token punctuation">.</span>group<span class="token punctuation">(</span><span class="token punctuation">)</span>            column_no <span class="token operator">=</span> match<span class="token punctuation">.</span>start<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span>            location <span class="token operator">=</span> <span class="token punctuation">(</span>line_no<span class="token punctuation">,</span> column_no<span class="token punctuation">)</span>            index<span class="token punctuation">.</span>setdefault<span class="token punctuation">(</span>word<span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span>append<span class="token punctuation">(</span>location<span class="token punctuation">)</span><span class="token keyword">for</span> word <span class="token keyword">in</span> <span class="token builtin">sorted</span><span class="token punctuation">(</span>index<span class="token punctuation">,</span> key<span class="token operator">=</span><span class="token builtin">str</span><span class="token punctuation">.</span>upper<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>word<span class="token punctuation">,</span> index<span class="token punctuation">[</span>word<span class="token punctuation">]</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre><code>a [(1, 22), (2, 7), (3, 6), (8, 7), (8, 27), (10, 19), (12, 6), (17, 20), (21, 19)]A [(17, 1)]above [(34, 34)]ago [(1, 29), (15, 36)]all [(26, 30), (43, 9)]and [(1, 13), (6, 17), (8, 15), (11, 6), (13, 16), (25, 21), (29, 13), (44, 37)]And [(5, 1), (15, 1), (20, 4), (34, 1), (41, 1), (43, 1)]angels [(24, 5), (34, 17)]Annabel [(4, 19), (11, 13), (18, 17), (29, 28), (37, 21), (40, 21), (42, 21)]as [(26, 27)]away [(20, 17)]be [(6, 21)]beams [(39, 20)]beautiful [(18, 7), (37, 11), (40, 11), (42, 11)]blew [(17, 8)]bore [(20, 8)]bride [(44, 44)]bright [(41, 42)]bringing [(39, 35)]But [(10, 1), (31, 1)]but [(41, 27)]by [(2, 17), (6, 30), (9, 20), (16, 20), (22, 20), (27, 20), (28, 37), (31, 30), (43, 40), (45, 27), (46, 16)]By [(4, 4)]came [(19, 30), (28, 15)]Can [(36, 1)]child [(8, 9), (8, 29)]chilling [(17, 29)]Chilling [(29, 4)]cloud [(17, 22), (28, 31)]Coveted [(13, 4)]darling [(44, 10), (44, 21)]demons [(35, 12)]dissever [(36, 10)]down [(35, 19), (43, 35)]dreams [(39, 47)]envying [(25, 9)]ever [(36, 5)]eyes [(41, 49)]far [(31, 33), (33, 12)]feel [(41, 33)]For [(39, 1)]from [(20, 22), (36, 27)]half [(24, 17)]happy [(24, 25)]Heaven [(12, 40), (24, 34), (34, 27)]her [(13, 12), (19, 9), (20, 13), (21, 9), (25, 17), (45, 7), (46, 7)]highborn [(19, 13)]I [(8, 1), (11, 4), (41, 31), (43, 29)]In [(2, 4), (9, 4), (16, 4), (22, 4), (27, 4), (45, 4), (46, 4)]in [(21, 16), (24, 31), (34, 24)]It [(1, 1)]it [(31, 14)]killing [(29, 17)]kingdom [(2, 9), (9, 12), (16, 12), (22, 12), (27, 12)]kinsmen [(19, 22)]know [(3, 40), (26, 38)]Lee [(4, 27), (11, 21), (18, 25), (29, 36), (37, 29), (40, 29), (42, 29)]lie [(43, 31)]life [(44, 32)]lived [(3, 21), (5, 21)]long [(15, 31)]love [(6, 12), (10, 21), (10, 45), (12, 8), (31, 9), (31, 46)]loved [(6, 24), (10, 8)]maiden [(3, 8), (5, 10)]many [(1, 8), (1, 17), (33, 7)]may [(3, 36)]me [(6, 33), (13, 20), (20, 27), (25, 25), (39, 44)]men [(26, 34)]moon [(39, 9)]more [(10, 35)]my [(11, 10), (29, 25), (36, 19), (44, 7), (44, 18), (44, 29), (44, 41)]My [(18, 4)]name [(4, 11)]neither [(34, 5)]never [(39, 14), (41, 15)]night [(28, 40), (43, 17)]no [(5, 32)]Nor [(35, 4)]not [(24, 13)]of [(4, 16), (12, 37), (17, 17), (28, 24)]Of [(32, 4), (33, 4), (37, 4), (40, 4), (42, 4), (44, 4)]older [(32, 22)]other [(5, 35)]our [(31, 5)]out [(17, 13), (28, 20)]reason [(15, 18), (26, 19)]rise [(41, 21)]sea [(2, 24), (9, 27), (16, 27), (22, 27), (27, 27), (35, 34), (45, 34), (46, 32)]sepulchre [(21, 21), (45, 11)]seraphs [(12, 29)]she [(5, 17), (8, 19)]shut [(21, 4)]side [(43, 47)]So [(19, 1)]so [(24, 22), (43, 5)]soul [(36, 22), (36, 36)]sounding [(46, 23)]stars [(41, 9)]stronger [(31, 21)]Than [(6, 4)]than [(10, 40), (31, 37), (32, 28), (33, 22)]That [(3, 1), (28, 1)]that [(10, 26), (12, 13), (15, 25), (19, 4), (26, 6)]the [(2, 20), (4, 7), (9, 23), (12, 18), (15, 14), (16, 23), (22, 23), (26, 15), (27, 23), (28, 6), (28, 27), (31, 42), (34, 13), (35, 8), (35, 30), (36, 32), (37, 7), (39, 5), (40, 7), (41, 5), (41, 38), (42, 7), (43, 13), (43, 43), (45, 30), (46, 19)]The [(24, 1)]there [(3, 15), (45, 21)]this [(5, 5), (9, 7), (15, 5), (16, 7), (22, 7), (27, 7)]those [(32, 7)]thought [(5, 41)]tide [(43, 23)]to [(6, 9)]To [(21, 1)]tomb [(46, 11)]under [(35, 24)]up [(21, 13)]was [(1, 4), (8, 3), (8, 23), (10, 31), (15, 10), (26, 11), (31, 17)]we [(10, 5), (32, 33), (33, 27)]Went [(25, 4)]were [(32, 17)]who [(32, 13)]whom [(3, 27)]wind [(17, 3), (28, 10)]wingÃ¨d [(12, 22)]wiser [(33, 16)]with [(5, 27), (10, 14)]With [(12, 1)]without [(39, 27)]year [(1, 24)]Yes [(26, 1)]you [(3, 32)]</code></pre><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># æ˜ å°„çš„å¼¹æ€§é”®é€‰æ‹©ã€</span><span class="token comment"># åˆ©ç”¨defaultdict</span><span class="token keyword">from</span> collections <span class="token keyword">import</span> defaultdict<span class="token keyword">import</span> reWORD_RE <span class="token operator">=</span> re<span class="token punctuation">.</span><span class="token builtin">compile</span><span class="token punctuation">(</span><span class="token string">r'\w+'</span><span class="token punctuation">)</span>index <span class="token operator">=</span> defaultdict<span class="token punctuation">(</span><span class="token builtin">list</span><span class="token punctuation">)</span><span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'poetry.txt'</span><span class="token punctuation">,</span> encoding<span class="token operator">=</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> fp<span class="token punctuation">:</span>    <span class="token keyword">for</span> line_no<span class="token punctuation">,</span> line <span class="token keyword">in</span> <span class="token builtin">enumerate</span><span class="token punctuation">(</span>fp<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">for</span> match <span class="token keyword">in</span> WORD_RE<span class="token punctuation">.</span>finditer<span class="token punctuation">(</span>line<span class="token punctuation">)</span><span class="token punctuation">:</span>            word <span class="token operator">=</span> match<span class="token punctuation">.</span>group<span class="token punctuation">(</span><span class="token punctuation">)</span>            column_no <span class="token operator">=</span> match<span class="token punctuation">.</span>start<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span>            location <span class="token operator">=</span> <span class="token punctuation">(</span>line_no<span class="token punctuation">,</span> column_no<span class="token punctuation">)</span>            index<span class="token punctuation">[</span>word<span class="token punctuation">]</span><span class="token punctuation">.</span>append<span class="token punctuation">(</span>location<span class="token punctuation">)</span><span class="token keyword">for</span> word <span class="token keyword">in</span> <span class="token builtin">sorted</span><span class="token punctuation">(</span>index<span class="token punctuation">,</span> key<span class="token operator">=</span><span class="token builtin">str</span><span class="token punctuation">.</span>upper<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>word<span class="token punctuation">,</span> index<span class="token punctuation">[</span>word<span class="token punctuation">]</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre><code>a [(1, 22), (2, 7), (3, 6), (8, 7), (8, 27), (10, 19), (12, 6), (17, 20), (21, 19)]A [(17, 1)]above [(34, 34)]ago [(1, 29), (15, 36)]all [(26, 30), (43, 9)]and [(1, 13), (6, 17), (8, 15), (11, 6), (13, 16), (25, 21), (29, 13), (44, 37)]And [(5, 1), (15, 1), (20, 4), (34, 1), (41, 1), (43, 1)]angels [(24, 5), (34, 17)]Annabel [(4, 19), (11, 13), (18, 17), (29, 28), (37, 21), (40, 21), (42, 21)]as [(26, 27)]away [(20, 17)]be [(6, 21)]beams [(39, 20)]beautiful [(18, 7), (37, 11), (40, 11), (42, 11)]blew [(17, 8)]bore [(20, 8)]bride [(44, 44)]bright [(41, 42)]bringing [(39, 35)]But [(10, 1), (31, 1)]but [(41, 27)]by [(2, 17), (6, 30), (9, 20), (16, 20), (22, 20), (27, 20), (28, 37), (31, 30), (43, 40), (45, 27), (46, 16)]By [(4, 4)]came [(19, 30), (28, 15)]Can [(36, 1)]child [(8, 9), (8, 29)]chilling [(17, 29)]Chilling [(29, 4)]cloud [(17, 22), (28, 31)]Coveted [(13, 4)]darling [(44, 10), (44, 21)]demons [(35, 12)]dissever [(36, 10)]down [(35, 19), (43, 35)]dreams [(39, 47)]envying [(25, 9)]ever [(36, 5)]eyes [(41, 49)]far [(31, 33), (33, 12)]feel [(41, 33)]For [(39, 1)]from [(20, 22), (36, 27)]half [(24, 17)]happy [(24, 25)]Heaven [(12, 40), (24, 34), (34, 27)]her [(13, 12), (19, 9), (20, 13), (21, 9), (25, 17), (45, 7), (46, 7)]highborn [(19, 13)]I [(8, 1), (11, 4), (41, 31), (43, 29)]In [(2, 4), (9, 4), (16, 4), (22, 4), (27, 4), (45, 4), (46, 4)]in [(21, 16), (24, 31), (34, 24)]It [(1, 1)]it [(31, 14)]killing [(29, 17)]kingdom [(2, 9), (9, 12), (16, 12), (22, 12), (27, 12)]kinsmen [(19, 22)]know [(3, 40), (26, 38)]Lee [(4, 27), (11, 21), (18, 25), (29, 36), (37, 29), (40, 29), (42, 29)]lie [(43, 31)]life [(44, 32)]lived [(3, 21), (5, 21)]long [(15, 31)]love [(6, 12), (10, 21), (10, 45), (12, 8), (31, 9), (31, 46)]loved [(6, 24), (10, 8)]maiden [(3, 8), (5, 10)]many [(1, 8), (1, 17), (33, 7)]may [(3, 36)]me [(6, 33), (13, 20), (20, 27), (25, 25), (39, 44)]men [(26, 34)]moon [(39, 9)]more [(10, 35)]my [(11, 10), (29, 25), (36, 19), (44, 7), (44, 18), (44, 29), (44, 41)]My [(18, 4)]name [(4, 11)]neither [(34, 5)]never [(39, 14), (41, 15)]night [(28, 40), (43, 17)]no [(5, 32)]Nor [(35, 4)]not [(24, 13)]of [(4, 16), (12, 37), (17, 17), (28, 24)]Of [(32, 4), (33, 4), (37, 4), (40, 4), (42, 4), (44, 4)]older [(32, 22)]other [(5, 35)]our [(31, 5)]out [(17, 13), (28, 20)]reason [(15, 18), (26, 19)]rise [(41, 21)]sea [(2, 24), (9, 27), (16, 27), (22, 27), (27, 27), (35, 34), (45, 34), (46, 32)]sepulchre [(21, 21), (45, 11)]seraphs [(12, 29)]she [(5, 17), (8, 19)]shut [(21, 4)]side [(43, 47)]So [(19, 1)]so [(24, 22), (43, 5)]soul [(36, 22), (36, 36)]sounding [(46, 23)]stars [(41, 9)]stronger [(31, 21)]Than [(6, 4)]than [(10, 40), (31, 37), (32, 28), (33, 22)]That [(3, 1), (28, 1)]that [(10, 26), (12, 13), (15, 25), (19, 4), (26, 6)]the [(2, 20), (4, 7), (9, 23), (12, 18), (15, 14), (16, 23), (22, 23), (26, 15), (27, 23), (28, 6), (28, 27), (31, 42), (34, 13), (35, 8), (35, 30), (36, 32), (37, 7), (39, 5), (40, 7), (41, 5), (41, 38), (42, 7), (43, 13), (43, 43), (45, 30), (46, 19)]The [(24, 1)]there [(3, 15), (45, 21)]this [(5, 5), (9, 7), (15, 5), (16, 7), (22, 7), (27, 7)]those [(32, 7)]thought [(5, 41)]tide [(43, 23)]to [(6, 9)]To [(21, 1)]tomb [(46, 11)]under [(35, 24)]up [(21, 13)]was [(1, 4), (8, 3), (8, 23), (10, 31), (15, 10), (26, 11), (31, 17)]we [(10, 5), (32, 33), (33, 27)]Went [(25, 4)]were [(32, 17)]who [(32, 13)]whom [(3, 27)]wind [(17, 3), (28, 10)]wingÃ¨d [(12, 22)]wiser [(33, 16)]with [(5, 27), (10, 14)]With [(12, 1)]without [(39, 27)]year [(1, 24)]Yes [(26, 1)]you [(3, 32)]</code></pre><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># ç”¨__missing__å¤„ç†</span><span class="token keyword">import</span> collections<span class="token keyword">class</span> <span class="token class-name">StrKeyDict</span><span class="token punctuation">(</span>collections<span class="token punctuation">.</span>UserDict<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">__missing__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> key<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">if</span> <span class="token builtin">isinstance</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> <span class="token builtin">str</span><span class="token punctuation">)</span><span class="token punctuation">:</span>            <span class="token keyword">raise</span> KeyError<span class="token punctuation">(</span>key<span class="token punctuation">)</span>        <span class="token keyword">return</span> self<span class="token punctuation">[</span><span class="token builtin">str</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">]</span>    <span class="token keyword">def</span> <span class="token function">__contains__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> key<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">return</span> <span class="token builtin">str</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span> <span class="token keyword">in</span> self<span class="token punctuation">.</span>data    <span class="token keyword">def</span> <span class="token function">__setitem__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> key<span class="token punctuation">,</span> item<span class="token punctuation">)</span><span class="token punctuation">:</span>        self<span class="token punctuation">.</span>data<span class="token punctuation">[</span><span class="token builtin">str</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">=</span> item<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># å­—å…¸çš„å˜ç§</span><span class="token comment"># collections.OrderedDictï¼Œé”®å€¼ä¼šæ’åºï¼Œå¯ä»¥ç”¨popitem</span><span class="token comment"># collections.ChainMapï¼Œå¯ä»¥å®¹çº³å¤šä¸ªdictï¼Œä¸€å¹¶æŸ¥è¯¢</span><span class="token comment"># collections.Counter,è®¡æ•°å™¨</span><span class="token comment"># collection.UserDict çº¯pythonå®ç°çš„dictï¼Œæ›´æ–¹ä¾¿æˆ‘ä»¬åšdictæ‰©å±•</span><span class="token keyword">from</span> collections <span class="token keyword">import</span> Counterct <span class="token operator">=</span> Counter<span class="token punctuation">(</span><span class="token string">"sdsadcsadsadaaasdsac"</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>ct<span class="token punctuation">)</span>ct<span class="token punctuation">.</span>update<span class="token punctuation">(</span><span class="token string">'wewqewq'</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>ct<span class="token punctuation">)</span>ct<span class="token punctuation">.</span>most_common<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment">#æ’åº</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre><code>Counter({'a': 7, 's': 6, 'd': 5, 'c': 2})Counter({'a': 7, 's': 6, 'd': 5, 'w': 3, 'c': 2, 'e': 2, 'q': 2})[('a', 7), ('s', 6), ('d', 5), ('w', 3), ('c', 2), ('e', 2), ('q', 2)]</code></pre><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># ä¸å¯å˜æ˜ å°„ç±»å‹</span><span class="token keyword">from</span> types <span class="token keyword">import</span> MappingProxyTyped <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">:</span> <span class="token string">'A'</span><span class="token punctuation">}</span>d_proxy <span class="token operator">=</span> MappingProxyType<span class="token punctuation">(</span>d<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>d_proxy<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>d_proxy<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre><code>A---------------------------------------------------------------------------KeyError                                  Traceback (most recent call last)&lt;ipython-input-12-d4ae1d057cd0&gt; in &lt;module&gt;      4 d_proxy = MappingProxyType(d)      5 print(d_proxy[1])----&gt; 6 print(d_proxy[2])KeyError: 2</code></pre><pre class="line-numbers language-python" data-language="python"><code class="language-python">d<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'B'</span><span class="token keyword">print</span><span class="token punctuation">(</span>d_proxy<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><pre><code>B</code></pre>]]></content>
      
      
      <categories>
          
          <category> FluentPython </category>
          
          <category> Dictionaries_and_Sets </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>01_1.2 A simple two-dimensional vector class</title>
      <link href="2020/12/02/python/fluentpython/chapter-04-text-versus-bytes/1.1-character/"/>
      <url>2020/12/02/python/fluentpython/chapter-04-text-versus-bytes/1.1-character/</url>
      
        <content type="html"><![CDATA[<pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># ç¼–ç å’Œè§£ç </span>s <span class="token operator">=</span> <span class="token string">'cafä¸­å›½'</span><span class="token keyword">print</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span> <span class="token builtin">len</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">)</span>b <span class="token operator">=</span> s<span class="token punctuation">.</span>encode<span class="token punctuation">(</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>b<span class="token punctuation">,</span> <span class="token builtin">len</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">)</span>s <span class="token operator">=</span> b<span class="token punctuation">.</span>decode<span class="token punctuation">(</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span> <span class="token builtin">len</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre><code>cafä¸­å›½ 5b'caf\xe4\xb8\xad\xe5\x9b\xbd' 9cafä¸­å›½ 5</code></pre><pre class="line-numbers language-python" data-language="python"><code class="language-python">s1 <span class="token operator">=</span> <span class="token string">'cafeÌ'</span><span class="token keyword">print</span><span class="token punctuation">(</span>s1<span class="token punctuation">,</span> <span class="token builtin">len</span><span class="token punctuation">(</span>s1<span class="token punctuation">)</span><span class="token punctuation">)</span>b <span class="token operator">=</span> s1<span class="token punctuation">.</span>encode<span class="token punctuation">(</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>b<span class="token punctuation">,</span> <span class="token builtin">len</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">)</span>s2 <span class="token operator">=</span> <span class="token string">'cafÃ©'</span><span class="token keyword">print</span><span class="token punctuation">(</span>s2<span class="token punctuation">,</span> <span class="token builtin">len</span><span class="token punctuation">(</span>s2<span class="token punctuation">)</span><span class="token punctuation">)</span>b <span class="token operator">=</span> s2<span class="token punctuation">.</span>encode<span class="token punctuation">(</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>b<span class="token punctuation">,</span> <span class="token builtin">len</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre><code>cafeÌ 5b'cafe\xcc\x81' 6cafÃ© 4b'caf\xc3\xa9' 5</code></pre><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">from</span> unicodedata <span class="token keyword">import</span> normalize<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>normalize<span class="token punctuation">(</span><span class="token string">'NFC'</span><span class="token punctuation">,</span>s1<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token builtin">len</span><span class="token punctuation">(</span>normalize<span class="token punctuation">(</span><span class="token string">'NFC'</span><span class="token punctuation">,</span>s2<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><pre><code>4 4</code></pre><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># byteså’Œbytearrayï¼Œbyteså­˜å‚¨çš„æ˜¯æ•´æ•°</span><span class="token comment"># bytesåˆ‡ç‰‡è¿˜æ˜¯byteså¯¹è±¡ï¼ŒbytearrayåŒæ ·</span>cafe <span class="token operator">=</span> <span class="token builtin">bytes</span><span class="token punctuation">(</span><span class="token string">'cafÃ©'</span><span class="token punctuation">,</span> encoding<span class="token operator">=</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>cafe<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>cafe<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token keyword">for</span> b <span class="token keyword">in</span> cafe<span class="token punctuation">:</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span>cafe_arr <span class="token operator">=</span> <span class="token builtin">bytearray</span><span class="token punctuation">(</span>cafe<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>cafe_arr<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>cafe_arr<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre><code>b'caf\xc3\xa9'b'c'9997102195169bytearray(b'caf\xc3\xa9')bytearray(b'\xa9')</code></pre><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> arraynumbers<span class="token operator">=</span>array<span class="token punctuation">.</span>array<span class="token punctuation">(</span><span class="token string">'h'</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span>octets<span class="token operator">=</span><span class="token builtin">bytes</span><span class="token punctuation">(</span>numbers<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>octets<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><pre><code>b'\xfe\xff\xff\xff\x00\x00\x01\x00\x02\x00'</code></pre><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># é»˜è®¤ç¼–ç </span><span class="token keyword">import</span> sys<span class="token punctuation">,</span> localeexpressions <span class="token operator">=</span> <span class="token triple-quoted-string string">"""        locale.getpreferredencoding()        type(my_file)        my_file.encoding        sys.stdout.isatty()        sys.stdout.encoding        sys.stdin.isatty()        sys.stdin.encoding        sys.stderr.isatty()        sys.stderr.encoding        sys.getdefaultencoding()        sys.getfilesystemencoding()"""</span>my_file <span class="token operator">=</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'dummy'</span><span class="token punctuation">,</span> <span class="token string">'w'</span><span class="token punctuation">)</span><span class="token keyword">for</span> expression <span class="token keyword">in</span> expressions<span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    value <span class="token operator">=</span> <span class="token builtin">eval</span><span class="token punctuation">(</span>expression<span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>expression<span class="token punctuation">.</span>rjust<span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">'-&gt;'</span><span class="token punctuation">,</span> <span class="token builtin">repr</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre><code> locale.getpreferredencoding() -&gt; 'UTF-8'                 type(my_file) -&gt; &lt;class '_io.TextIOWrapper'&gt;              my_file.encoding -&gt; 'UTF-8'           sys.stdout.isatty() -&gt; False           sys.stdout.encoding -&gt; 'UTF-8'            sys.stdin.isatty() -&gt; False            sys.stdin.encoding -&gt; 'UTF-8'           sys.stderr.isatty() -&gt; False           sys.stderr.encoding -&gt; 'UTF-8'      sys.getdefaultencoding() -&gt; 'utf-8'   sys.getfilesystemencoding() -&gt; 'utf-8'</code></pre><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> FluentPython </category>
          
          <category> Python_Data_Model </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>01_2.1 tuple</title>
      <link href="2020/12/02/python/fluentpython/chapter-02-an-array-of-sequences/2.1-tuple/"/>
      <url>2020/12/02/python/fluentpython/chapter-02-an-array-of-sequences/2.1-tuple/</url>
      
        <content type="html"><![CDATA[<pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># åˆ—è¡¨æ¨å¯¼å¼</span>colors <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'black'</span><span class="token punctuation">,</span> <span class="token string">'white'</span><span class="token punctuation">]</span>sizes <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'S'</span><span class="token punctuation">,</span> <span class="token string">'M'</span><span class="token punctuation">,</span> <span class="token string">'L'</span><span class="token punctuation">]</span>tshirts<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">(</span>color<span class="token punctuation">,</span> size<span class="token punctuation">)</span> <span class="token keyword">for</span> color <span class="token keyword">in</span> colors <span class="token keyword">for</span> size <span class="token keyword">in</span> sizes<span class="token punctuation">]</span>tshirts<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre><code>[('black', 'S'), ('black', 'M'), ('black', 'L'), ('white', 'S'), ('white', 'M'), ('white', 'L')]</code></pre><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># åˆ—è¡¨ç”Ÿæˆå™¨ å°±æ˜¯å§[]å˜æˆ()å¯ä»¥è°ƒç”¨nextç”Ÿæˆ</span>tshirts <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"</span><span class="token interpolation"><span class="token punctuation">{</span>color<span class="token punctuation">}</span></span><span class="token string"> </span><span class="token interpolation"><span class="token punctuation">{</span>size<span class="token punctuation">}</span></span><span class="token string">"</span></span> <span class="token keyword">for</span> color <span class="token keyword">in</span> colors <span class="token keyword">for</span> size <span class="token keyword">in</span> sizes<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>tshirts<span class="token punctuation">)</span><span class="token keyword">for</span> tshirt <span class="token keyword">in</span> tshirts<span class="token punctuation">:</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>tshirt<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre><code>&lt;generator object &lt;genexpr&gt; at 0x7fb438de0228&gt;black Sblack Mblack Lwhite Swhite Mwhite L</code></pre><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># å…ƒç»„çš„ç”¨æ³•</span>lax_coordinates <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">33.9425</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">118.408056</span><span class="token punctuation">)</span>city<span class="token punctuation">,</span> year<span class="token punctuation">,</span> pop<span class="token punctuation">,</span> chg<span class="token punctuation">,</span> area <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token string">'Tokyo'</span><span class="token punctuation">,</span> <span class="token number">2003</span><span class="token punctuation">,</span> <span class="token number">32450</span><span class="token punctuation">,</span> <span class="token number">0.66</span><span class="token punctuation">,</span> <span class="token number">8014</span><span class="token punctuation">)</span>traveler_ids <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token string">'USA'</span><span class="token punctuation">,</span> <span class="token string">'31195855'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token string">'BRA'</span><span class="token punctuation">,</span> <span class="token string">'CE342567'</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token string">'ESP'</span><span class="token punctuation">,</span> <span class="token string">'XDA205856'</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token keyword">for</span> passport <span class="token keyword">in</span> <span class="token builtin">sorted</span><span class="token punctuation">(</span>traveler_ids<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'%s/%s'</span> <span class="token operator">%</span> passport<span class="token punctuation">)</span><span class="token keyword">for</span> country<span class="token punctuation">,</span> _ <span class="token keyword">in</span> traveler_ids<span class="token punctuation">:</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>country<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre><code>BRA/CE342567ESP/XDA205856USA/31195855USABRAESP</code></pre><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># å…ƒç»„æ‹†åŒ…</span>lax_coordinates <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">33.9425</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">118.408056</span><span class="token punctuation">)</span>latitude<span class="token punctuation">,</span> longitude <span class="token operator">=</span> lax_coordinates <span class="token comment"># tuple unpacking</span><span class="token keyword">print</span><span class="token punctuation">(</span>latitude<span class="token punctuation">,</span> longitude<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><pre><code>33.9425 -118.408056</code></pre><pre class="line-numbers language-python" data-language="python"><code class="language-python">t <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">)</span>quotient<span class="token punctuation">,</span> remainder <span class="token operator">=</span> <span class="token builtin">divmod</span><span class="token punctuation">(</span><span class="token operator">*</span>t<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>quotient<span class="token punctuation">,</span> remainder<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><pre><code>2 4</code></pre><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> os_<span class="token punctuation">,</span> filename <span class="token operator">=</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">'/home/ctios/.ssh/idrsa.pub'</span><span class="token punctuation">)</span>filename<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><pre><code>'idrsa.pub'</code></pre><pre class="line-numbers language-python" data-language="python"><code class="language-python">a<span class="token punctuation">,</span> <span class="token operator">*</span>body<span class="token punctuation">,</span> c<span class="token punctuation">,</span> d <span class="token operator">=</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>a<span class="token punctuation">,</span> body<span class="token punctuation">,</span> c<span class="token punctuation">,</span> d<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><pre><code>(0, [1, 2, 3, 4, 5, 6, 7], 8, 9)</code></pre><pre class="line-numbers language-python" data-language="python"><code class="language-python">metro_areas <span class="token operator">=</span> <span class="token punctuation">[</span>    <span class="token punctuation">(</span><span class="token string">'Tokyo'</span><span class="token punctuation">,</span><span class="token string">'JP'</span><span class="token punctuation">,</span><span class="token number">36.933</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">35.689722</span><span class="token punctuation">,</span><span class="token number">139.691667</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    <span class="token punctuation">(</span><span class="token string">'Delhi NCR'</span><span class="token punctuation">,</span> <span class="token string">'IN'</span><span class="token punctuation">,</span> <span class="token number">21.935</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">28.613889</span><span class="token punctuation">,</span> <span class="token number">77.208889</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>     <span class="token punctuation">(</span><span class="token string">'Mexico City'</span><span class="token punctuation">,</span> <span class="token string">'MX'</span><span class="token punctuation">,</span> <span class="token number">20.142</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">19.433333</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">99.133333</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    <span class="token punctuation">(</span><span class="token string">'New York-Newark'</span><span class="token punctuation">,</span> <span class="token string">'US'</span><span class="token punctuation">,</span> <span class="token number">20.104</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">40.808611</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">74.020386</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    <span class="token punctuation">(</span><span class="token string">'Sao Paulo'</span><span class="token punctuation">,</span> <span class="token string">'BR'</span><span class="token punctuation">,</span> <span class="token number">19.649</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">23.547778</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">46.635833</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">]</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'{:15} | {:^9} | {:^9}'</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">,</span> <span class="token string">'lat.'</span><span class="token punctuation">,</span> <span class="token string">'long.'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> fmt <span class="token operator">=</span> <span class="token string">'{:15} | {:9.4f} | {:9.4f}'</span><span class="token keyword">for</span> name<span class="token punctuation">,</span> cc<span class="token punctuation">,</span> pop<span class="token punctuation">,</span> <span class="token punctuation">(</span>latitude<span class="token punctuation">,</span> longitude<span class="token punctuation">)</span> <span class="token keyword">in</span> metro_areas<span class="token punctuation">:</span>     <span class="token keyword">if</span> longitude <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">:</span>         <span class="token keyword">print</span><span class="token punctuation">(</span>fmt<span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> latitude<span class="token punctuation">,</span> longitude<span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre><code>                |   lat.    |   long.  Mexico City     |   19.4333 |  -99.1333New York-Newark |   40.8086 |  -74.0204Sao Paulo       |  -23.5478 |  -46.6358</code></pre><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># å…·åå…ƒç»„ namedtuple</span><span class="token keyword">from</span> collections <span class="token keyword">import</span> namedtupleCity <span class="token operator">=</span> namedtuple<span class="token punctuation">(</span><span class="token string">'City'</span><span class="token punctuation">,</span> <span class="token string">'name country population coordinates'</span><span class="token punctuation">)</span>tokyo <span class="token operator">=</span> City<span class="token punctuation">(</span><span class="token string">'Tokyo'</span><span class="token punctuation">,</span> <span class="token string">'JP'</span><span class="token punctuation">,</span> <span class="token number">36.933</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">35.689722</span><span class="token punctuation">,</span> <span class="token number">139.691667</span><span class="token punctuation">)</span><span class="token punctuation">)</span>City<span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token string">'Tokyo'</span><span class="token punctuation">,</span> country<span class="token operator">=</span><span class="token string">'JP'</span><span class="token punctuation">,</span> population<span class="token operator">=</span><span class="token number">36.933</span><span class="token punctuation">,</span> coordinates<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">35.689722</span><span class="token punctuation">,</span> <span class="token number">139.691667</span><span class="token punctuation">)</span><span class="token punctuation">)</span>tokyo<span class="token punctuation">,</span> tokyo<span class="token punctuation">.</span>population<span class="token punctuation">,</span> tokyo<span class="token punctuation">.</span>coordinates<span class="token punctuation">,</span> tokyo<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre><code>(City(name='Tokyo', country='JP', population=36.933, coordinates=(35.689722, 139.691667)), 36.933, (35.689722, 139.691667), 'JP')</code></pre><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># å…·åå…ƒç»„çš„å±æ€§å’Œæ–¹æ³•</span>City<span class="token punctuation">.</span>_fields<span class="token punctuation">(</span><span class="token string">'name'</span><span class="token punctuation">,</span> <span class="token string">'country'</span><span class="token punctuation">,</span> <span class="token string">'population'</span><span class="token punctuation">,</span> <span class="token string">'coordinates'</span><span class="token punctuation">)</span>LatLong <span class="token operator">=</span> namedtuple<span class="token punctuation">(</span><span class="token string">'LatLong'</span><span class="token punctuation">,</span> <span class="token string">'lat long'</span><span class="token punctuation">)</span>delhi_data <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token string">'Delhi NCR'</span><span class="token punctuation">,</span> <span class="token string">'IN'</span><span class="token punctuation">,</span> <span class="token number">21.935</span><span class="token punctuation">,</span> LatLong<span class="token punctuation">(</span><span class="token number">28.613889</span><span class="token punctuation">,</span> <span class="token number">77.208889</span><span class="token punctuation">)</span><span class="token punctuation">)</span>delhi <span class="token operator">=</span> City<span class="token punctuation">.</span>_make<span class="token punctuation">(</span>delhi_data<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>delhi<span class="token punctuation">)</span><span class="token keyword">for</span> key<span class="token punctuation">,</span> value <span class="token keyword">in</span> delhi<span class="token punctuation">.</span>_asdict<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>items<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">print</span><span class="token punctuation">(</span>key <span class="token operator">+</span> <span class="token string">':'</span><span class="token punctuation">,</span> value<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre><code>City(name='Delhi NCR', country='IN', population=21.935, coordinates=LatLong(lat=28.613889, long=77.208889))name: Delhi NCRcountry: INpopulation: 21.935coordinates: LatLong(lat=28.613889, long=77.208889)</code></pre>]]></content>
      
      
      <categories>
          
          <category> FluentPython </category>
          
          <category> An_Array_of_Sequences </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>01_2.2 slice</title>
      <link href="2020/12/02/python/fluentpython/chapter-02-an-array-of-sequences/2.2-slice/"/>
      <url>2020/12/02/python/fluentpython/chapter-02-an-array-of-sequences/2.2-slice/</url>
      
        <content type="html"><![CDATA[<pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># åˆ‡ç‰‡</span>s <span class="token operator">=</span> <span class="token string">'bicycle'</span>s<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span> s<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><pre><code>('bye', 'elcycib')</code></pre><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># åˆ‡ç‰‡sliceå¯¹è±¡ï¼Œä¼ å…¥seq.__getitem__()</span>invoice <span class="token operator">=</span> <span class="token triple-quoted-string string">"""0.....6.................................40........52...55........1909 Pimoroni PiBrella                      $17.50    3    $52.501489 6mm Tactile Switch x20                 $4.95     2     $9.901510 Panavise Jr. - PV-201                  $28.00    1    $28.001601 PiTFT Mini Kit 320x240                 $34.95    1    $34.95"""</span>SKU <span class="token operator">=</span> <span class="token builtin">slice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">)</span>DESCRIPTION <span class="token operator">=</span> <span class="token builtin">slice</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">40</span><span class="token punctuation">)</span>UNIT_PRICE <span class="token operator">=</span> <span class="token builtin">slice</span><span class="token punctuation">(</span><span class="token number">40</span><span class="token punctuation">,</span> <span class="token number">52</span><span class="token punctuation">)</span>QUANTITY <span class="token operator">=</span> <span class="token builtin">slice</span><span class="token punctuation">(</span><span class="token number">52</span><span class="token punctuation">,</span> <span class="token number">55</span><span class="token punctuation">)</span>ITEM_TOTAL <span class="token operator">=</span> <span class="token builtin">slice</span><span class="token punctuation">(</span><span class="token number">55</span><span class="token punctuation">,</span> <span class="token boolean">None</span><span class="token punctuation">)</span>line_items <span class="token operator">=</span> invoice<span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">'\n'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">:</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token keyword">for</span> item <span class="token keyword">in</span> line_items<span class="token punctuation">:</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>item<span class="token punctuation">[</span>UNIT_PRICE<span class="token punctuation">]</span><span class="token punctuation">,</span> item<span class="token punctuation">[</span>DESCRIPTION<span class="token punctuation">]</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre><code>    $17.50   imoroni PiBrella                      $4.95    mm Tactile Switch x20                 $28.00   anavise Jr. - PV-201                  $34.95   iTFT Mini Kit 320x240             </code></pre><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># å¤šç»´åˆ‡ç‰‡å’Œçœç•¥ NumPy</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># ç»™åˆ‡ç‰‡èµ‹å€¼</span>l <span class="token operator">=</span> <span class="token builtin">list</span><span class="token punctuation">(</span><span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>l<span class="token punctuation">)</span>l<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">:</span><span class="token number">5</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">]</span><span class="token keyword">print</span><span class="token punctuation">(</span>l<span class="token punctuation">)</span><span class="token keyword">del</span> l<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">:</span><span class="token number">7</span><span class="token punctuation">]</span><span class="token keyword">print</span><span class="token punctuation">(</span>l<span class="token punctuation">)</span>l<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">11</span><span class="token punctuation">,</span> <span class="token number">22</span><span class="token punctuation">]</span><span class="token keyword">print</span><span class="token punctuation">(</span>l<span class="token punctuation">)</span>l<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">:</span><span class="token number">5</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">100</span><span class="token punctuation">]</span><span class="token keyword">print</span><span class="token punctuation">(</span>l<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre><code>[0, 1, 2, 3, 4, 5, 6, 7, 8, 9][0, 1, 20, 30, 5, 6, 7, 8, 9][0, 1, 20, 30, 5, 8, 9][0, 1, 20, 11, 5, 22, 9][0, 1, 100, 22, 9]</code></pre><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> FluentPython </category>
          
          <category> An_Array_of_Sequences </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>01_çº¿æ€§å›å½’_Linear_Regression</title>
      <link href="2020/12/02/machinelearning/wu-en-da-ji-qi-xue-xi/linear-regression/"/>
      <url>2020/12/02/machinelearning/wu-en-da-ji-qi-xue-xi/linear-regression/</url>
      
        <content type="html"><![CDATA[<h1 id="çº¿æ€§å›å½’">çº¿æ€§å›å½’</h1><p>å›å½’æœ¬è´¨ä¸Šæ˜¯åˆ©ç”¨ç¦»æ•£çš„å€¼æ¥è¯•ç€æ¨æµ‹å‡ºä¸€ä¸ªè¿ç»­å€¼çš„ç»“æœï¼Œå¯¹å…¶ä»–å€¼è¿›è¡Œé¢„æµ‹</p><h2 id="å•å˜é‡çº¿æ€§å›å½’linear-regression-with-one-variable">1 å•å˜é‡çº¿æ€§å›å½’ï¼ˆLinear Regression with One Variableï¼‰</h2><figure><img src="https://cdn.jsdelivr.net/gh/ZqtCtios/Image/img/20201202232210.png" alt="image-20201202232210402"><figcaption>image-20201202232210402</figcaption></figure><h3 id="ä¾‹å­æˆ¿ä»·é¢„æµ‹é—®é¢˜">1.1 ä¾‹å­æˆ¿ä»·é¢„æµ‹é—®é¢˜ï¼š</h3><p>å‡ä½¿å›å½’é—®é¢˜çš„è®­ç»ƒé›†(Training Set)å¦‚ä¸‹è¡¨æ‰€ç¤º</p><figure><img src="https://cdn.jsdelivr.net/gh/ZqtCtios/Image/img/20201202232330.png" alt="image-20201202232330802"><figcaption>image-20201202232330802</figcaption></figure><p>æˆ‘ä»¬å°†è¦ç”¨æ¥æè¿°è¿™ä¸ªå›å½’é—®é¢˜çš„æ ‡è®°å¦‚ä¸‹:</p><ul><li><p><span class="math inline">\(ğ‘š\)</span>ä»£è¡¨è®­ç»ƒé›†ä¸­å®ä¾‹çš„æ•°é‡</p></li><li><span class="math inline">\(ğ‘¥\)</span> ä»£è¡¨ç‰¹å¾/è¾“å…¥å˜é‡</li><li><span class="math inline">\(ğ‘¦\)</span> ä»£è¡¨ç›®æ ‡å˜é‡/è¾“å‡ºå˜é‡</li><li><span class="math inline">\((ğ‘¥,ğ‘¦)\)</span> ä»£è¡¨è®­ç»ƒé›†ä¸­çš„å®ä¾‹</li><li><span class="math inline">\((ğ‘¥^{(ğ‘–)},ğ‘¦^{(ğ‘–)})\)</span>ä»£è¡¨ç¬¬<span class="math inline">\(ğ‘–\)</span> ä¸ªè§‚å¯Ÿå®ä¾‹</li><li><p><span class="math inline">\(h\)</span> ä»£è¡¨å­¦ä¹ ç®—æ³•çš„è§£å†³æ–¹æ¡ˆæˆ–å‡½æ•°ä¹Ÿç§°ä¸ºå‡è®¾(hypothesis)</p></li></ul><figure><img src="https://cdn.jsdelivr.net/gh/ZqtCtios/Image/img/20201202232830.png" alt="image-20201202232830677"><figcaption>image-20201202232830677</figcaption></figure><p>æˆ‘ä»¬è¯¥å¦‚ä½•è¡¨è¾¾ h?</p><p>ä¸€ç§å¯èƒ½çš„è¡¨è¾¾æ–¹å¼ä¸º:<span class="math inline">\(h_ğœƒ(ğ‘¥) = ğœƒ_0 + ğœƒ_1ğ‘¥\)</span>ï¼Œå› ä¸ºåªå«æœ‰ä¸€ä¸ªç‰¹å¾/è¾“å…¥å˜é‡ï¼Œå› æ­¤è¿™æ · çš„é—®é¢˜å«ä½œå•å˜é‡çº¿æ€§å›å½’é—®é¢˜ã€‚</p><h3 id="ä»£ä»·å‡½æ•°">1.2 ä»£ä»·å‡½æ•°</h3><h4 id="è¯¯å·®å®šä¹‰">è¯¯å·®å®šä¹‰ï¼š</h4><p>é¢„æµ‹å€¼ä¸å®é™…å€¼çš„çš„å·®è·ã€‚<span class="math inline">\(h_ğœƒ(x)-y\)</span></p><h4 id="ä»£ä»·å‡½æ•°-1">ä»£ä»·å‡½æ•°</h4><p>å¯¹äº<span class="math inline">\(h_ğœƒ(ğ‘¥) = ğœƒ_0 + ğœƒ_1ğ‘¥\)</span>ï¼Œç›®çš„æ˜¯æ‰¾åˆ°ä¸¤ä¸ªå˜é‡<span class="math inline">\(ğœƒ_0,ğœƒ_1\)</span>æ¥ä½¿å¾—æ•´ä½“è¯¯å·®çš„å€¼æœ€å°ï¼Œå³è¯¯å·®å¹³æ–¹å’Œæœ€å°ï¼Œä»£ä»·å…¬å¼ä¸ºï¼š <span class="math display">\[MSE=J\left(\theta_{0}, \theta_{1}\right)=\frac{1}{2 m} \sum_{i=1}^{m}\left(h_{\theta}\left(x^{(i)}\right)-y^{(i)}\right)^{2}\]</span> <img src="https://cdn.jsdelivr.net/gh/ZqtCtios/Image/img/20201202233929.png" alt="image-20201202233929481"></p><h3 id="æ¢¯åº¦ä¸‹é™">1.3 æ¢¯åº¦ä¸‹é™</h3><p>æ‰¹é‡æ¢¯åº¦ä¸‹é™(batch gradient descent): <span class="math display">\[\begin{aligned}&amp;\text { repeat until convergence \{}\\&amp;\theta_{j}:=\theta_{j}-\alpha \frac{\partial}{\partial \theta_{j}} J\left(\theta_{0}, \theta_{1}\right) \quad(\text { for } j=0 \text { and } j=1)\\&amp;\text{\}}\end{aligned}\]</span> å…¶ä¸­<span class="math inline">\(ğ‘\)</span>æ˜¯å­¦ä¹ ç‡(learning rate)ï¼Œå®ƒå†³å®šäº†æˆ‘ä»¬æ²¿ç€èƒ½è®©ä»£ä»·å‡½æ•°ä¸‹é™ç¨‹åº¦æœ€å¤§çš„æ–¹å‘ å‘ä¸‹è¿ˆå‡ºçš„æ­¥å­æœ‰å¤šå¤§ï¼Œåœ¨æ‰¹é‡æ¢¯åº¦ä¸‹é™ä¸­ï¼Œæˆ‘ä»¬æ¯ä¸€æ¬¡éƒ½åŒæ—¶è®©æ‰€æœ‰çš„å‚æ•°å‡å»å­¦ä¹ é€Ÿç‡ä¹˜ä»¥ä»£ä»·å‡½æ•°çš„å¯¼æ•°ï¼Œå‚æ•°æ›´æ–°çš„æ­¥éª¤å¦‚ä¸‹ <span class="math display">\[\begin{array}{l}\text { temp } 0:=\theta_{0}-\alpha \frac{\partial}{\partial \theta_{0}} J\left(\theta_{0}, \theta_{1}\right) \\\text { templ }:=\theta_{1}-\alpha \frac{\partial}{\partial \theta_{1}} J\left(\theta_{0}, \theta_{1}\right) \\\theta_{0}:=\text { temp } 0 \\\theta_{1}:=\text { temp } 1\end{array}\]</span></p><ul><li><span class="math inline">\(a\)</span>å¤ªå°æ”¶æ•›é€Ÿåº¦å¤ªæ…¢</li><li><span class="math inline">\(a\)</span>å¤ªå¤§å¯èƒ½ä¸æ”¶æ•›</li></ul><h3 id="æ¢¯åº¦ä¸‹é™çš„çº¿æ€§å›å½’">1.4 æ¢¯åº¦ä¸‹é™çš„çº¿æ€§å›å½’</h3><p><span class="math display">\[\begin{array}{c}\frac{\partial}{\partial \theta_{j}} J\left(\theta_{0}, \theta_{1}\right)=\frac{\partial}{\partial \theta_{j}} \frac{1}{2 m} \sum_{i=1}^{m}\left(h_{\theta}\left(x^{(i)}\right)-y^{(i)}\right)^{2} \\j=0 \text { æ—¶: } \frac{\partial}{\partial \theta_{0}} J\left(\theta_{0}, \theta_{1}\right)=\frac{1}{m} \sum_{i=1}^{m}\left(h_{\theta}\left(x^{(i)}\right)-y^{(i)}\right) \\j=1 \text { æ—¶: } \quad \frac{\partial}{\partial \theta_{1}} J\left(\theta_{0}, \theta_{1}\right)=\frac{1}{m} \sum_{i=1}^{m}\left(\left(h_{\theta}\left(x^{(i)}\right)-y^{(i)}\right) \cdot x^{(i)}\right)\end{array}\]</span></p><h2 id="å¤šå˜é‡çº¿æ€§å›å½’linear-regression-with-multiple-variables">2 å¤šå˜é‡çº¿æ€§å›å½’(Linear Regression with Multiple Variables)</h2><p>å¯¹ä¸Šé¢çš„æ¨¡å‹å¢åŠ æ›´å¤šçš„ç‰¹å¾ï¼Œæ¨¡å‹ä¸­çš„ç‰¹å¾ä¸º<span class="math inline">\((x_1,x_2,....,x_n)\)</span></p><figure><img src="https://cdn.jsdelivr.net/gh/ZqtCtios/Image/img/20201203163630.png" alt="image-20201203150333545"><figcaption>image-20201203150333545</figcaption></figure><p>å¢æ·»æ›´å¤šç‰¹å¾åï¼Œæˆ‘ä»¬å¼•å…¥ä¸€ç³»åˆ—æ–°çš„æ³¨é‡Š:</p><ul><li><p><span class="math inline">\(ğ‘›\)</span> ä»£è¡¨ç‰¹å¾çš„æ•°é‡</p></li><li><p><span class="math inline">\(ğ‘¥^{(ğ‘–)}\)</span>ä»£è¡¨ç¬¬ <span class="math inline">\(ğ‘–\)</span> ä¸ªè®­ç»ƒå®ä¾‹ï¼Œæ˜¯ç‰¹å¾çŸ©é˜µä¸­çš„ç¬¬<span class="math inline">\(ğ‘–\)</span>è¡Œï¼Œæ˜¯ä¸€ä¸ªå‘é‡(vector)ã€‚</p></li><li><p>æ¯”æ–¹è¯´ï¼Œä¸Šå›¾çš„ <span class="math display">\[x^{(2)}=\left[\begin{array}{c}1416 \\3 \\2 \\40\end{array}\right]\]</span></p></li><li><p><span class="math inline">\(ğ‘¥^{(ğ‘–)}_j\)</span>ä»£è¡¨ç‰¹å¾çŸ©é˜µä¸­ç¬¬$ ğ‘–$ è¡Œçš„ç¬¬<span class="math inline">\(ğ‘—\)</span>ä¸ªç‰¹å¾ï¼Œä¹Ÿå°±æ˜¯ç¬¬ ğ‘– ä¸ªè®­ç»ƒå®ä¾‹çš„ç¬¬ ğ‘— ä¸ªç‰¹å¾ã€‚</p></li><li><p>å¦‚ä¸Šå›¾çš„<span class="math inline">\(\mid x_{2}^{(2)}=3, x_{3}^{(2)}=2\)</span></p></li><li><p>æ”¯æŒå¤šå˜é‡çš„å‡è®¾ h è¡¨ç¤ºä¸º:<span class="math inline">\(h_{\theta}(x)=\theta_{0}+\theta_{1} x_{1}+\theta_{2} x_{2}+\ldots+\theta_{n} x_{n}\)</span></p></li><li><p>è¿™ä¸ªå…¬å¼ä¸­æœ‰ğ‘› + 1ä¸ªå‚æ•°å’Œğ‘›ä¸ªå˜é‡ï¼Œä¸ºäº†ä½¿å¾—å…¬å¼èƒ½å¤Ÿç®€åŒ–ä¸€äº›ï¼Œå¼•å…¥<span class="math inline">\(ğ‘¥_0 = 1\)</span>ï¼Œåˆ™å…¬ å¼è½¬åŒ–ä¸º:<span class="math inline">\(h_{\theta}(x)=\theta_{0} x_{0}+\theta_{1} x_{1}+\theta_{2} x_{2}+\ldots+\theta_{n} x_{n}\)</span></p></li><li><p>æ­¤æ—¶æ¨¡å‹ä¸­çš„å‚æ•°æ˜¯ä¸€ä¸ª<span class="math inline">\(ğ‘› + 1\)</span>ç»´çš„å‘é‡ï¼Œä»»ä½•ä¸€ä¸ªè®­ç»ƒå®ä¾‹ä¹Ÿéƒ½æ˜¯ğ‘› + 1ç»´çš„å‘é‡ï¼Œç‰¹ å¾çŸ©é˜µğ‘‹çš„ç»´åº¦æ˜¯ <span class="math inline">\(ğ‘š âˆ— (ğ‘› + 1)\)</span>ã€‚ å› æ­¤å…¬å¼å¯ä»¥ç®€åŒ–ä¸º:<span class="math inline">\(h_ğœƒ(ğ‘¥) = ğœƒ^ğ‘‡ğ‘‹\)</span>ï¼Œå…¶ä¸­ä¸Šæ ‡ğ‘‡ä»£è¡¨çŸ©é˜µè½¬ç½®ã€‚</p></li></ul><h3 id="å¤šå˜é‡æ¢¯åº¦ä¸‹é™gradient-descent-for-multiple-variables">2.1 å¤šå˜é‡æ¢¯åº¦ä¸‹é™Gradient Descent for Multiple Variables</h3><p>ä¸å•å˜é‡çº¿æ€§å›å½’ç±»ä¼¼ï¼Œåœ¨å¤šå˜é‡çº¿æ€§å›å½’ä¸­ï¼Œæˆ‘ä»¬ä¹Ÿæ„å»ºä¸€ä¸ªä»£ä»·å‡½æ•°ï¼Œåˆ™è¿™ä¸ªä»£ä»· å‡½æ•°æ˜¯æ‰€æœ‰å»ºæ¨¡è¯¯å·®çš„å¹³æ–¹å’Œï¼Œå³: <span class="math display">\[J\left(\theta_{0}, \theta_{1} \ldots \theta_{n}\right)=\frac{1}{2 m} \sum_{i=1}^{m}\left(h_{\theta}\left(x^{(i)}\right)-y^{(i)}\right)^{2}\]</span> æ¢¯åº¦ä¸‹é™ç®—æ³•æ±‚å¯¼åï¼š</p><p>Repeatï¼š <span class="math display">\[\theta_{j}:=\theta_{j}-\alpha \frac{1}{m} \sum_{i=1}^{m}\left(\left(h_{\theta}\left(x^{(i)}\right)-y^{(i)}\right) \cdot x_{j}^{(i)}\right)\]</span> ( simultaneously update <span class="math inline">\(\theta_{j}\)</span>$  =0,1, , )$</p><p>è®¡ç®—Costå‡½æ•°Pythonä»£ç ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">computeCost</span><span class="token punctuation">(</span>X<span class="token punctuation">,</span> y<span class="token punctuation">,</span> theta<span class="token punctuation">)</span><span class="token punctuation">:</span>  inner <span class="token operator">=</span> np<span class="token punctuation">.</span>power<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">(</span>X <span class="token operator">*</span> theta<span class="token punctuation">.</span>T<span class="token punctuation">)</span> <span class="token operator">-</span> y<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span>   <span class="token keyword">return</span> np<span class="token punctuation">.</span><span class="token builtin">sum</span><span class="token punctuation">(</span>inner<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token punctuation">(</span><span class="token number">2</span> <span class="token operator">*</span> <span class="token builtin">len</span><span class="token punctuation">(</span>X<span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h3 id="æ¢¯åº¦ä¸‹é™æ³•å®è·µ-1-ç‰¹å¾ç¼©æ”¾">2.2 æ¢¯åº¦ä¸‹é™æ³•å®è·µ 1-ç‰¹å¾ç¼©æ”¾</h3><p>Gradient Descent in Practice I - Feature Scaling</p><p>åœ¨æˆ‘ä»¬é¢å¯¹å¤šç»´ç‰¹å¾é—®é¢˜çš„æ—¶å€™ï¼Œæˆ‘ä»¬è¦ä¿è¯è¿™äº›ç‰¹å¾éƒ½å…·æœ‰ç›¸è¿‘çš„å°ºåº¦ï¼Œè¿™å°†å¸®åŠ©æ¢¯åº¦ä¸‹é™ç®—æ³•æ›´å¿«åœ°æ”¶æ•›ï¼Œè§£å†³çš„æ–¹æ³•æ˜¯å°è¯•å°†æ‰€æœ‰ç‰¹å¾çš„å°ºåº¦éƒ½å°½é‡ç¼©æ”¾åˆ°-1åˆ°1ä¹‹é—´ã€‚</p><figure><img src="https://cdn.jsdelivr.net/gh/ZqtCtios/Image/img/20201203153342.png" alt="image-20201203153342751"><figcaption>image-20201203153342751</figcaption></figure><p>æœ€ç®€å•çš„æ–¹æ³•æ˜¯ä»¤:<span class="math inline">\(x_{n}=\frac{x_{n}-\mu_{n}}{s_{n}},\)</span> å…¶ä¸­ <span class="math inline">\(\mu_{n}\)</span> æ˜¯å¹³å‡å€¼, <span class="math inline">\(s_{n}\)</span> æ˜¯æ ‡å‡†å·®ã€‚</p><h3 id="æ¢¯åº¦ä¸‹é™æ³•å®è·µ-2-å­¦ä¹ ç‡">2.3 æ¢¯åº¦ä¸‹é™æ³•å®è·µ 2-å­¦ä¹ ç‡</h3><p>Gradient Descent in Practice II - Learning Rate</p><p>æ¢¯åº¦ä¸‹é™ç®—æ³•çš„æ¯æ¬¡è¿­ä»£å—åˆ°å­¦ä¹ ç‡çš„å½±å“ï¼Œå¦‚æœå­¦ä¹ ç‡ğ‘è¿‡å°ï¼Œåˆ™è¾¾åˆ°æ”¶æ•›æ‰€éœ€çš„è¿­ ä»£æ¬¡æ•°ä¼šéå¸¸é«˜;å¦‚æœå­¦ä¹ ç‡ğ‘è¿‡å¤§ï¼Œæ¯æ¬¡è¿­ä»£å¯èƒ½ä¸ä¼šå‡å°ä»£ä»·å‡½æ•°ï¼Œå¯èƒ½ä¼šè¶Šè¿‡å±€éƒ¨æœ€ å°å€¼å¯¼è‡´æ— æ³•æ”¶æ•›ã€‚</p><h3 id="ç‰¹å¾å’Œå¤šé¡¹å¼å›å½’">2.4 ç‰¹å¾å’Œå¤šé¡¹å¼å›å½’</h3><p>çº¿æ€§å›å½’å¹¶ä¸é€‚ç”¨äºæ‰€æœ‰æ•°æ®ï¼Œæœ‰æ—¶æˆ‘ä»¬éœ€è¦æ›²çº¿æ¥é€‚åº”æˆ‘ä»¬çš„æ•°æ®ï¼Œæ¯”å¦‚ä¸€ä¸ªäºŒæ¬¡æ–¹æ¨¡å‹: <span class="math inline">\(h_{\theta}(x)=\theta_{0}+\theta_{1} x_{1}+\theta_{2} x_{2}^{2}\)</span> æˆ–è€…ä¸‰æ¬¡æ–¹æ¨¡å‹: <span class="math inline">\(\quad h_{\theta}(x)=\theta_{0}+\theta_{1} x_{1}+\theta_{2} x_{2}^{2}+\theta_{3} x_{3}^{3}\)</span></p><figure><img src="https://cdn.jsdelivr.net/gh/ZqtCtios/Image/img/20201203155639.png" alt="image-20201203155639868"><figcaption>image-20201203155639868</figcaption></figure><p>é€šå¸¸æˆ‘ä»¬éœ€è¦å…ˆè§‚å¯Ÿæ•°æ®ç„¶åå†å†³å®šå‡†å¤‡å°è¯•æ€æ ·çš„æ¨¡å‹ã€‚ å¦å¤–ï¼Œæˆ‘ä»¬å¯ä»¥ä»¤ï¼š<span class="math inline">\(x_{2}=x_{2}^{2}, x_{3}=x_{3}^{3},\)</span> ä»è€Œå°†æ¨¡å‹è½¬åŒ–ä¸ºçº¿æ€§å›å½’æ¨¡å‹ã€‚</p><p>ä»è€Œå°†æ¨¡å‹è½¬åŒ–ä¸ºçº¿æ€§å›å½’æ¨¡å‹ã€‚</p><h3 id="æ­£è§„æ–¹ç¨‹">2.5 æ­£è§„æ–¹ç¨‹</h3><p>æ­£è§„æ–¹ç¨‹æ˜¯é€šè¿‡æ±‚è§£ä¸‹é¢çš„æ–¹ç¨‹æ¥æ‰¾å‡ºä½¿å¾—ä»£ä»·å‡½æ•°æœ€å°çš„å‚æ•°çš„ <span class="math inline">\(ï¼š \frac{\partial}{\partial \theta_{j}} J\left(\theta_{j}\right)=0\)</span>ï¼Œå‡è®¾æˆ‘ä»¬çš„è®­ç»ƒé›†ç‰¹å¾çŸ©é˜µä¸º Xï¼ˆåŒ…å«äº† <span class="math inline">\(x_{0}=1\)</span> ï¼‰å¹¶ä¸”æˆ‘ä»¬çš„è®­ç»ƒé›†ç»“æœä¸ºå‘é‡ yï¼Œåˆ™åˆ©ç”¨æ­£è§„æ–¹ç¨‹è§£å‡ºå‘é‡ <span class="math inline">\(\theta=\left(X^{T} X\right)^{-1} X^{T} y\)</span> ã€‚ä¸Šæ ‡ T ä»£è¡¨çŸ©é˜µè½¬ç½®ï¼Œä¸Šæ ‡-1 ä»£è¡¨çŸ©é˜µçš„é€†ã€‚è®¾çŸ©é˜µ <span class="math inline">\(A=X^{T} X,\)</span> åˆ™: <span class="math inline">\(\left(X^{T} X\right)^{-1}=A^{-1}\)</span></p><p>æ¢¯åº¦ä¸‹é™ä¸æ­£è§„æ–¹ç¨‹çš„æ¯”è¾ƒ:</p><table><colgroup><col style="width: 31%"><col style="width: 68%"></colgroup><thead><tr class="header"><th style="text-align: left;">æ¢¯åº¦ä¸‹é™</th><th>æ­£è§„æ–¹ç¨‹</th></tr></thead><tbody><tr class="odd"><td style="text-align: left;">éœ€è¦é€‰æ‹©å­¦ä¹ ç‡ğ›¼</td><td>ä¸éœ€è¦</td></tr><tr class="even"><td style="text-align: left;">éœ€è¦å¤šæ¬¡è¿­ä»£</td><td>ä¸€æ¬¡è¿ç®—å¾—å‡º</td></tr><tr class="odd"><td style="text-align: left;">å½“ç‰¹å¾æ•°é‡ğ‘›å¤§æ—¶ä¹Ÿèƒ½è¾ƒå¥½é€‚ç”¨</td><td>éœ€è¦è®¡ç®— <span class="math inline">\(\left(X^{T} X\right)^{-1}\)</span> å¦‚æœç‰¹å¾æ•°é‡ <span class="math inline">\(n\)</span> è¾ƒå¤§åˆ™è¿ç®—ä»£ä»·å¤§, å› ä¸ºçŸ©é˜µé€†çš„è®¡ç®—æ—¶é—´å¤æ‚åº¦ ä¸º <span class="math inline">\(O\left(n^{3}\right),\)</span> é€šå¸¸æ¥è¯´å½“nå°äº10000 æ—¶è¿˜æ˜¯ å¯ä»¥æ¥å—çš„</td></tr><tr class="even"><td style="text-align: left;">é€‚ç”¨äºå„ç§ç±»å‹çš„æ¨¡å‹</td><td>åªé€‚ç”¨äºçº¿æ€§æ¨¡å‹ï¼Œä¸é€‚åˆé€»è¾‘å›å½’æ¨¡å‹ç­‰ å…¶ä»–æ¨¡å‹</td></tr></tbody></table><p>æ­£è§„æ–¹ç¨‹çš„pythonå®ç°ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> numpy <span class="token keyword">as</span> np <span class="token keyword">def</span> <span class="token function">normalEqn</span><span class="token punctuation">(</span>X<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">:</span>  theta <span class="token operator">=</span> np<span class="token punctuation">.</span>linalg<span class="token punctuation">.</span>inv<span class="token punctuation">(</span>X<span class="token punctuation">.</span>T@X<span class="token punctuation">)</span>@X<span class="token punctuation">.</span>T@y <span class="token comment">#X.T@X ç­‰ä»·äº X.T.dot(X) </span>  <span class="token keyword">return</span> theta<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> å´æ©è¾¾â€”â€”æœºå™¨å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æœºå™¨å­¦ä¹  </tag>
            
            <tag> å´æ©è¾¾ </tag>
            
            <tag> çº¿æ€§å›å½’ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>01_2.6 queue</title>
      <link href="2020/12/02/python/fluentpython/chapter-02-an-array-of-sequences/2.4-sort-and-bisect/"/>
      <url>2020/12/02/python/fluentpython/chapter-02-an-array-of-sequences/2.4-sort-and-bisect/</url>
      
        <content type="html"><![CDATA[<pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># list.sort()å’Œsorted()</span>fruits <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'grape'</span><span class="token punctuation">,</span> <span class="token string">'raspberry'</span><span class="token punctuation">,</span> <span class="token string">'apple'</span><span class="token punctuation">,</span> <span class="token string">'banana'</span><span class="token punctuation">]</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">sorted</span><span class="token punctuation">(</span>fruits<span class="token punctuation">)</span><span class="token punctuation">,</span> fruits<span class="token punctuation">)</span>fruits<span class="token punctuation">.</span>sort<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>fruits<span class="token punctuation">)</span>fruits<span class="token punctuation">.</span>sort<span class="token punctuation">(</span>key<span class="token operator">=</span><span class="token builtin">len</span><span class="token punctuation">,</span> reverse<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>fruits<span class="token punctuation">)</span><span class="token comment"># pythonä¸­çš„sortæ˜¯ç¨³å®šçš„ï¼Œå¤§å°ä¸€è‡´æ—¶ï¼Œä½ç½®ä¸å˜</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># bisect_left, bisect, bisect_rightæ˜¯æŸ¥æ‰¾ä½ç½®ï¼Œä¸æ’å…¥</span><span class="token keyword">from</span> bisect <span class="token keyword">import</span> bisect_left<span class="token punctuation">,</span> bisect<span class="token punctuation">,</span> bisect_righta <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span>index <span class="token operator">=</span> bisect_left<span class="token punctuation">(</span>a<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> index<span class="token punctuation">)</span>a <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span>index <span class="token operator">=</span> bisect<span class="token punctuation">(</span>a<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> index<span class="token punctuation">)</span>a <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span>index <span class="token operator">=</span> bisect_right<span class="token punctuation">(</span>a<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> index<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre><code>[1, 2, 3, 4] 1[1, 2, 3, 4] 2[1, 2, 3, 4] 2</code></pre><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># bisect å¯ä»¥ä½œä¸ºç´¢å¼•æŸ¥è¯¢è¡¨æ ¼</span><span class="token keyword">import</span> bisect<span class="token keyword">def</span> <span class="token function">grade</span><span class="token punctuation">(</span>score<span class="token punctuation">,</span> breakpoints<span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">60</span><span class="token punctuation">,</span> <span class="token number">70</span><span class="token punctuation">,</span> <span class="token number">80</span><span class="token punctuation">,</span> <span class="token number">90</span><span class="token punctuation">]</span><span class="token punctuation">,</span> grades<span class="token operator">=</span><span class="token string">'FDCBA'</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    i <span class="token operator">=</span> bisect<span class="token punctuation">.</span>bisect<span class="token punctuation">(</span>breakpoints<span class="token punctuation">,</span> score<span class="token punctuation">)</span>    <span class="token keyword">return</span> grades<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>grade<span class="token punctuation">(</span>score<span class="token punctuation">)</span> <span class="token keyword">for</span> score <span class="token keyword">in</span> <span class="token punctuation">[</span><span class="token number">33</span><span class="token punctuation">,</span> <span class="token number">99</span><span class="token punctuation">,</span> <span class="token number">77</span><span class="token punctuation">,</span> <span class="token number">70</span><span class="token punctuation">,</span> <span class="token number">89</span><span class="token punctuation">,</span> <span class="token number">90</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre><code>['F', 'A', 'C', 'C', 'B', 'A', 'A']</code></pre><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># ç”¨bisect.insortæ’å…¥æ–°å…ƒç´ </span><span class="token keyword">import</span> bisect<span class="token keyword">import</span> randomSIZE <span class="token operator">=</span> <span class="token number">7</span>random<span class="token punctuation">.</span>seed<span class="token punctuation">(</span><span class="token number">1997</span><span class="token punctuation">)</span>my_list <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>SIZE<span class="token punctuation">)</span><span class="token punctuation">:</span>    new_item <span class="token operator">=</span> random<span class="token punctuation">.</span>randrange<span class="token punctuation">(</span>SIZE <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">)</span>    bisect<span class="token punctuation">.</span>insort<span class="token punctuation">(</span>my_list<span class="token punctuation">,</span> new_item<span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'%2d -&gt;'</span> <span class="token operator">%</span> new_item<span class="token punctuation">,</span> my_list<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre><code>12 -&gt; [12] 3 -&gt; [3, 12] 1 -&gt; [1, 3, 12] 3 -&gt; [1, 3, 3, 12] 2 -&gt; [1, 2, 3, 3, 12]10 -&gt; [1, 2, 3, 3, 10, 12] 3 -&gt; [1, 2, 3, 3, 3, 10, 12]</code></pre><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> FluentPython </category>
          
          <category> An_Array_of_Sequences </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>01_2.5 array and memoryview</title>
      <link href="2020/12/02/python/fluentpython/chapter-02-an-array-of-sequences/2.5-array-and-memoryview/"/>
      <url>2020/12/02/python/fluentpython/chapter-02-an-array-of-sequences/2.5-array-and-memoryview/</url>
      
        <content type="html"><![CDATA[<p>æ­¤æ¨¡å—å®šä¹‰äº†ä¸€ç§å¯¹è±¡ç±»å‹ï¼Œå¯ä»¥ç´§å‡‘åœ°è¡¨ç¤ºåŸºæœ¬ç±»å‹å€¼çš„æ•°ç»„ï¼šå­—ç¬¦ã€æ•´æ•°ã€æµ®ç‚¹æ•°ç­‰ã€‚ æ•°ç»„å±äºåºåˆ—ç±»å‹ï¼Œå…¶è¡Œä¸ºä¸åˆ—è¡¨éå¸¸ç›¸ä¼¼ï¼Œä¸åŒä¹‹å¤„åœ¨äºå…¶ä¸­å­˜å‚¨çš„å¯¹è±¡ç±»å‹æ˜¯å—é™çš„ã€‚ ç±»å‹åœ¨å¯¹è±¡åˆ›å»ºæ—¶ä½¿ç”¨å•ä¸ªå­—ç¬¦çš„ <em>ç±»å‹ç </em> æ¥æŒ‡å®šã€‚ å·²å®šä¹‰çš„ç±»å‹ç å¦‚ä¸‹ï¼š</p><table><thead><tr class="header"><th style="text-align: left;">ç±»å‹ç </th><th style="text-align: left;">C ç±»å‹</th><th style="text-align: left;">Python ç±»å‹</th><th style="text-align: left;">ä»¥å­—èŠ‚è¡¨ç¤ºçš„æœ€å°å°ºå¯¸</th><th style="text-align: left;">æ³¨é‡Š</th></tr></thead><tbody><tr class="odd"><td style="text-align: left;"><code>'b'</code></td><td style="text-align: left;">signed char</td><td style="text-align: left;">int</td><td style="text-align: left;">1</td><td style="text-align: left;"></td></tr><tr class="even"><td style="text-align: left;"><code>'B'</code></td><td style="text-align: left;">unsigned char</td><td style="text-align: left;">int</td><td style="text-align: left;">1</td><td style="text-align: left;"></td></tr><tr class="odd"><td style="text-align: left;"><code>'u'</code></td><td style="text-align: left;">Py_UNICODE</td><td style="text-align: left;">Unicode å­—ç¬¦</td><td style="text-align: left;">2</td><td style="text-align: left;">(1)</td></tr><tr class="even"><td style="text-align: left;"><code>'h'</code></td><td style="text-align: left;">signed short</td><td style="text-align: left;">int</td><td style="text-align: left;">2</td><td style="text-align: left;"></td></tr><tr class="odd"><td style="text-align: left;"><code>'H'</code></td><td style="text-align: left;">unsigned short</td><td style="text-align: left;">int</td><td style="text-align: left;">2</td><td style="text-align: left;"></td></tr><tr class="even"><td style="text-align: left;"><code>'i'</code></td><td style="text-align: left;">signed int</td><td style="text-align: left;">int</td><td style="text-align: left;">2</td><td style="text-align: left;"></td></tr><tr class="odd"><td style="text-align: left;"><code>'I'</code></td><td style="text-align: left;">unsigned int</td><td style="text-align: left;">int</td><td style="text-align: left;">2</td><td style="text-align: left;"></td></tr><tr class="even"><td style="text-align: left;"><code>'l'</code></td><td style="text-align: left;">signed long</td><td style="text-align: left;">int</td><td style="text-align: left;">4</td><td style="text-align: left;"></td></tr><tr class="odd"><td style="text-align: left;"><code>'L'</code></td><td style="text-align: left;">unsigned long</td><td style="text-align: left;">int</td><td style="text-align: left;">4</td><td style="text-align: left;"></td></tr><tr class="even"><td style="text-align: left;"><code>'q'</code></td><td style="text-align: left;">signed long long</td><td style="text-align: left;">int</td><td style="text-align: left;">8</td><td style="text-align: left;">(2)</td></tr><tr class="odd"><td style="text-align: left;"><code>'Q'</code></td><td style="text-align: left;">unsigned long long</td><td style="text-align: left;">int</td><td style="text-align: left;">8</td><td style="text-align: left;">(2)</td></tr><tr class="even"><td style="text-align: left;"><code>'f'</code></td><td style="text-align: left;">float</td><td style="text-align: left;">float</td><td style="text-align: left;">4</td><td style="text-align: left;"></td></tr><tr class="odd"><td style="text-align: left;"><code>'d'</code></td><td style="text-align: left;">double</td><td style="text-align: left;">float</td><td style="text-align: left;">8</td><td style="text-align: left;"></td></tr></tbody></table><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">from</span> array <span class="token keyword">import</span> array<span class="token keyword">from</span> random <span class="token keyword">import</span> randomfloats<span class="token operator">=</span>array<span class="token punctuation">(</span><span class="token string">'d'</span><span class="token punctuation">,</span><span class="token punctuation">(</span>random<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token operator">**</span><span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>floats<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><pre><code>0.4585058847207508</code></pre><pre class="line-numbers language-python" data-language="python"><code class="language-python">fp<span class="token operator">=</span><span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'floats.bin'</span><span class="token punctuation">,</span><span class="token string">'wb+'</span><span class="token punctuation">)</span>floats<span class="token punctuation">.</span>tofile<span class="token punctuation">(</span>fp<span class="token punctuation">)</span>fp<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>floats2<span class="token operator">=</span>array<span class="token punctuation">(</span><span class="token string">'d'</span><span class="token punctuation">)</span>fp<span class="token operator">=</span><span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'floats.bin'</span><span class="token punctuation">,</span><span class="token string">'rb'</span><span class="token punctuation">)</span>floats2<span class="token punctuation">.</span>fromfile<span class="token punctuation">(</span>fp<span class="token punctuation">,</span><span class="token number">10</span><span class="token operator">**</span><span class="token number">7</span><span class="token punctuation">)</span>fp<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>floats2<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre><code>0.4585058847207508</code></pre><pre class="line-numbers language-python" data-language="python"><code class="language-python">floats<span class="token operator">=</span>array<span class="token punctuation">(</span>floats<span class="token punctuation">.</span>typecode<span class="token punctuation">,</span><span class="token builtin">sorted</span><span class="token punctuation">(</span>floats<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>floats<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><pre><code>array('d', [3.67431575165611e-08, 3.475699940080901e-07, 3.7822653908836656e-07, 4.061706841973489e-07, 6.074053917615174e-07, 6.484837163922563e-07, 6.683984088429185e-07, 7.039884853954348e-07, 7.172446871983595e-07, 7.357147590036917e-07])</code></pre><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># memeryview</span><span class="token keyword">import</span> this<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><pre><code>The Zen of Python, by Tim PetersBeautiful is better than ugly.Explicit is better than implicit.Simple is better than complex.Complex is better than complicated.Flat is better than nested.Sparse is better than dense.Readability counts.Special cases aren't special enough to break the rules.Although practicality beats purity.Errors should never pass silently.Unless explicitly silenced.In the face of ambiguity, refuse the temptation to guess.There should be one-- and preferably only one --obvious way to do it.Although that way may not be obvious at first unless you're Dutch.Now is better than never.Although never is often better than *right* now.If the implementation is hard to explain, it's a bad idea.If the implementation is easy to explain, it may be a good idea.Namespaces are one honking great idea -- let's do more of those!</code></pre><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> FluentPython </category>
          
          <category> An_Array_of_Sequences </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>01_1.2 A simple two-dimensional vector class</title>
      <link href="2020/12/02/python/fluentpython/chapter-02-an-array-of-sequences/2.6-queue/"/>
      <url>2020/12/02/python/fluentpython/chapter-02-an-array-of-sequences/2.6-queue/</url>
      
        <content type="html"><![CDATA[<pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># deque åŒå‘é˜Ÿåˆ—</span><span class="token keyword">from</span> collections <span class="token keyword">import</span> dequedq <span class="token operator">=</span> deque<span class="token punctuation">(</span><span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span> maxlen<span class="token operator">=</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>dq<span class="token punctuation">)</span>dq<span class="token punctuation">.</span>rotate<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>dq<span class="token punctuation">)</span>dq<span class="token punctuation">.</span>rotate<span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>dq<span class="token punctuation">)</span>dq<span class="token punctuation">.</span>appendleft<span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>dq<span class="token punctuation">)</span>dq<span class="token punctuation">.</span>extend<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">,</span> <span class="token number">40</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>dq<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre><code>deque([0, 1, 2, 3, 4, 5, 6, 7, 8, 9], maxlen=10)deque([7, 8, 9, 0, 1, 2, 3, 4, 5, 6], maxlen=10)deque([1, 2, 3, 4, 5, 6, 7, 8, 9, 0], maxlen=10)deque([-1, 1, 2, 3, 4, 5, 6, 7, 8, 9], maxlen=10)deque([3, 4, 5, 6, 7, 8, 9, 20, 30, 40], maxlen=10)</code></pre><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># ä¼˜å…ˆé˜Ÿåˆ—</span><span class="token keyword">import</span> heapq<span class="token keyword">import</span> randoma <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>heapq<span class="token punctuation">.</span>heapify<span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    heapq<span class="token punctuation">.</span>heappush<span class="token punctuation">(</span>a<span class="token punctuation">,</span> random<span class="token punctuation">.</span>randrange<span class="token punctuation">(</span><span class="token number">10</span><span class="token operator">**</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token keyword">while</span> <span class="token builtin">len</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">:</span>    x <span class="token operator">=</span> heapq<span class="token punctuation">.</span>heappop<span class="token punctuation">(</span>a<span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre><code>[403, 433, 459, 476, 541, 985, 821, 855, 822, 855]403433459476541821822855855985</code></pre><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> FluentPython </category>
          
          <category> Python_Data_Model </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>01_1.2 A simple two-dimensional vector class</title>
      <link href="2020/12/02/python/fluentpython/chapter-03-dictionaries-and-sets/3.2-set/"/>
      <url>2020/12/02/python/fluentpython/chapter-03-dictionaries-and-sets/3.2-set/</url>
      
        <content type="html"><![CDATA[<pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment">#é›†åˆçš„æœ¬è´¨æ˜¯è®¸å¤šå”¯ä¸€å¯¹è±¡çš„èšé›†ï¼Œå¯ä»¥ç”¨äºå»é‡</span>l <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">,</span> <span class="token string">'c'</span><span class="token punctuation">,</span> <span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">]</span><span class="token builtin">set</span><span class="token punctuation">(</span>l<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><pre><code>{'a', 'b', 'c'}</code></pre><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment">#é›†åˆçš„è¿ç®—ç¬¦</span>a <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">}</span>b <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">}</span><span class="token keyword">print</span><span class="token punctuation">(</span>a <span class="token operator">|</span> b<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>a <span class="token operator">&amp;</span> b<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>a <span class="token operator">-</span> b<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>a <span class="token operator">^</span> b<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre><code>{1, 2, 3, 4, 5, 6}{3, 4}{1, 2}{1, 2, 5, 6}</code></pre><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">from</span> unicodedata <span class="token keyword">import</span> name<span class="token punctuation">{</span><span class="token builtin">chr</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span> <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">,</span><span class="token number">236</span><span class="token punctuation">)</span> <span class="token keyword">if</span> <span class="token string">'SIGN'</span> <span class="token keyword">in</span> name<span class="token punctuation">(</span><span class="token builtin">chr</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><pre><code>{'#', '$', '%', '+', '&lt;', '=', '&gt;', 'Â¢', 'Â£', 'Â¤', 'Â¥', 'Â§', 'Â©', 'Â¬', 'Â®', 'Â°', 'Â±', 'Âµ', 'Â¶', 'Ã—'}</code></pre><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> FluentPython </category>
          
          <category> Python_Data_Model </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>01_2.3 +,*,+=,*=</title>
      <link href="2020/12/02/python/fluentpython/chapter-02-an-array-of-sequences/2.3/"/>
      <url>2020/12/02/python/fluentpython/chapter-02-an-array-of-sequences/2.3/</url>
      
        <content type="html"><![CDATA[<pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># å¯¹åºåˆ—ä½¿ç”¨+ï¼Œ*</span><span class="token comment"># å½“a*n è¿™ä¸ªè¯­å¥ä¸­ï¼Œå½“åºåˆ—aé‡Œé¢çš„å…ƒç´ æ˜¯å¯¹å…¶ä»–å¯å˜å¯¹è±¡çš„å¼•ç”¨ï¼Œä¹˜æ³•åªæ˜¯èµ‹å€¼å¤šä¸ªå¼•ç”¨ï¼Œå…¶ä¸­çš„è¿™äº›å¼•ç”¨éƒ½æ˜¯æŒ‡å‘åŒä¸€ä¸ªåˆ—è¡¨ï¼Œä¾‹å¦‚</span>board <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">'_'</span><span class="token punctuation">]</span> <span class="token operator">*</span> <span class="token number">3</span> <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token keyword">print</span><span class="token punctuation">(</span>board<span class="token punctuation">)</span>board<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'X'</span><span class="token keyword">print</span><span class="token punctuation">(</span>board<span class="token punctuation">)</span>weird_board <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">'_'</span><span class="token punctuation">]</span> <span class="token operator">*</span> <span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">*</span> <span class="token number">3</span>weird_board<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'0'</span><span class="token keyword">print</span><span class="token punctuation">(</span>weird_board<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre><code>[['_', '_', '_'], ['_', '_', '_'], ['_', '_', '_']][['_', '_', '_'], ['_', '_', 'X'], ['_', '_', '_']][['_', '_', '0'], ['_', '_', '0'], ['_', '_', '0']]</code></pre><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># å¢é‡èµ‹å€¼ +=,*=</span><span class="token comment"># å¦‚æœå¯¹è±¡å®ç°äº†__iadd__,__imul__çš„è¯ï¼Œå°±æ˜¯åœ¨åŸåŸºç¡€ä¸Šå¢åŠ </span><span class="token comment"># å¦åˆ™å°±æ˜¯è°ƒç”¨__add__ï¼Œ__mul__ï¼Œå¾—åˆ°ä¸€ä¸ªæ–°å¯¹è±¡ï¼Œä¾‹å¦‚</span>l <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'l={}, id={}'</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>l<span class="token punctuation">,</span> <span class="token builtin">id</span><span class="token punctuation">(</span>l<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>l <span class="token operator">*=</span> <span class="token number">2</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'l={}, id={}'</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>l<span class="token punctuation">,</span> <span class="token builtin">id</span><span class="token punctuation">(</span>l<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>t<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'t={}, id={}'</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>t<span class="token punctuation">,</span><span class="token builtin">id</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>t<span class="token operator">*=</span><span class="token number">2</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'t={}, id={}'</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>t<span class="token punctuation">,</span><span class="token builtin">id</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment"># lçš„idæ²¡å˜ï¼Œtçš„idå˜äº†</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre><code>l=[1, 2, 3], id=140216592790216l=[1, 2, 3, 1, 2, 3], id=140216592790216t=(1, 2, 3), id=140216592745168t=(1, 2, 3, 1, 2, 3), id=140216592237672</code></pre><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># å…³äº+=çš„è°œé¢˜</span>t <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">30</span><span class="token punctuation">,</span> <span class="token number">40</span><span class="token punctuation">]</span><span class="token punctuation">)</span>t<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">+=</span> <span class="token punctuation">[</span><span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">60</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><pre><code>---------------------------------------------------------------------------TypeError                                 Traceback (most recent call last)&lt;ipython-input-6-b2fc2439c603&gt; in &lt;module&gt;      1 # å…³äº+=çš„è°œé¢˜      2 t = (1, 2, [30, 40])----&gt; 3 t[2] += [50, 60]TypeError: 'tuple' object does not support item assignment</code></pre><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">print</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre><code>(1, 2, [30, 40, 50, 60])</code></pre>]]></content>
      
      
      <categories>
          
          <category> FluentPython </category>
          
          <category> An_Array_of_Sequences </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Chapter_01_The_Python_Data_Model</title>
      <link href="2020/12/01/python/fluentpython/chapter-01-the-python-data-model/"/>
      <url>2020/12/01/python/fluentpython/chapter-01-the-python-data-model/</url>
      
        <content type="html"><![CDATA[<h1 id="chapter_01_the_python_data_model">Chapter_01_The_Python_Data_Model</h1><h2 id="playing-cards">1.1 Playing Cards</h2><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> collectionsCard <span class="token operator">=</span> collections<span class="token punctuation">.</span>namedtuple<span class="token punctuation">(</span><span class="token string">'Card'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'rank'</span><span class="token punctuation">,</span> <span class="token string">'suit'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token keyword">class</span> <span class="token class-name">FrenchDesk</span><span class="token punctuation">:</span>    ranks <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token builtin">str</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span> <span class="token keyword">for</span> n <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">11</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token operator">+</span><span class="token builtin">list</span><span class="token punctuation">(</span><span class="token string">'JQKA'</span><span class="token punctuation">)</span>    suits <span class="token operator">=</span> <span class="token string">'spades diamonds clubs hearts'</span><span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        self<span class="token punctuation">.</span>_cards <span class="token operator">=</span> <span class="token punctuation">[</span>Card<span class="token punctuation">(</span>rank<span class="token punctuation">,</span> suit<span class="token punctuation">)</span>                       <span class="token keyword">for</span> suit <span class="token keyword">in</span> self<span class="token punctuation">.</span>suits <span class="token keyword">for</span> rank <span class="token keyword">in</span> self<span class="token punctuation">.</span>ranks<span class="token punctuation">]</span>    <span class="token keyword">def</span> <span class="token function">__len__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">return</span> <span class="token builtin">len</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>_cards<span class="token punctuation">)</span>    <span class="token keyword">def</span> <span class="token function">__getitem__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> position<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">return</span> self<span class="token punctuation">.</span>_cards<span class="token punctuation">[</span>position<span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment">#è®¿é—®çº¸ç‰Œå¯¹è±¡</span>beer_card <span class="token operator">=</span> Card<span class="token punctuation">(</span><span class="token string">'7'</span><span class="token punctuation">,</span> <span class="token string">'diamonds'</span><span class="token punctuation">)</span>beer_card<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><blockquote><p>Card(rank='7', suit='diamonds')</p></blockquote><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># å®šä¹‰äº†lenä¹‹åå¯ä»¥æŸ¥çœ‹len</span>desk <span class="token operator">=</span> FrenchDesk<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token builtin">len</span><span class="token punctuation">(</span>desk<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><blockquote><p>52</p></blockquote><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># å®šä¹‰äº†getitemå¯ä»¥è®©å¯¹è±¡å˜æˆå¯è¿­ä»£çš„</span>desk<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><blockquote><p>Card(rank='2', suit='spades')</p></blockquote><pre class="line-numbers language-python" data-language="python"><code class="language-python">desk<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><blockquote><p>Card(rank='A', suit='hearts')</p></blockquote><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">from</span> random <span class="token keyword">import</span> choicechoice<span class="token punctuation">(</span>desk<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><blockquote><p>Card(rank='6', suit='clubs')</p></blockquote><pre class="line-numbers language-python" data-language="python"><code class="language-python">desk<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token number">3</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><blockquote><p>[Card(rank='2', suit='spades'), Card(rank='3', suit='spades'), Card(rank='4', suit='spades')]</p></blockquote><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">for</span> card <span class="token keyword">in</span> desk<span class="token punctuation">:</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>card<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><blockquote><p>Card(rank='2', suit='spades') Card(rank='3', suit='spades') Card(rank='4', suit='spades') Card(rank='5', suit='spades') Card(rank='6', suit='spades') Card(rank='7', suit='spades') Card(rank='8', suit='spades') Card(rank='9', suit='spades') Card(rank='10', suit='spades') Card(rank='J', suit='spades') Card(rank='Q', suit='spades') Card(rank='K', suit='spades') Card(rank='A', suit='spades') Card(rank='2', suit='diamonds') Card(rank='3', suit='diamonds') Card(rank='4', suit='diamonds') Card(rank='5', suit='diamonds') Card(rank='6', suit='diamonds') Card(rank='7', suit='diamonds') Card(rank='8', suit='diamonds') Card(rank='9', suit='diamonds') Card(rank='10', suit='diamonds') Card(rank='J', suit='diamonds') Card(rank='Q', suit='diamonds') Card(rank='K', suit='diamonds') Card(rank='A', suit='diamonds') Card(rank='2', suit='clubs') Card(rank='3', suit='clubs') Card(rank='4', suit='clubs') Card(rank='5', suit='clubs') Card(rank='6', suit='clubs') Card(rank='7', suit='clubs') Card(rank='8', suit='clubs') Card(rank='9', suit='clubs') Card(rank='10', suit='clubs') Card(rank='J', suit='clubs') Card(rank='Q', suit='clubs') Card(rank='K', suit='clubs') Card(rank='A', suit='clubs') Card(rank='2', suit='hearts') Card(rank='3', suit='hearts') Card(rank='4', suit='hearts') Card(rank='5', suit='hearts') Card(rank='6', suit='hearts') Card(rank='7', suit='hearts') Card(rank='8', suit='hearts') Card(rank='9', suit='hearts') Card(rank='10', suit='hearts') Card(rank='J', suit='hearts') Card(rank='Q', suit='hearts') Card(rank='K', suit='hearts') Card(rank='A', suit='hearts')</p></blockquote><pre class="line-numbers language-python" data-language="python"><code class="language-python">Card<span class="token punctuation">(</span><span class="token string">'Q'</span><span class="token punctuation">,</span> <span class="token string">'hearts'</span><span class="token punctuation">)</span> <span class="token keyword">in</span> desk<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><blockquote><p>True</p></blockquote><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># åŠ ä¸Šæ’åºçš„key</span>suits_value <span class="token operator">=</span> <span class="token builtin">dict</span><span class="token punctuation">(</span>spades<span class="token operator">=</span><span class="token number">3</span><span class="token punctuation">,</span> hearts<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">,</span> diamonds<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span> clubs<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token keyword">def</span> <span class="token function">spades_high</span><span class="token punctuation">(</span>card<span class="token punctuation">)</span><span class="token punctuation">:</span>    rank_value <span class="token operator">=</span> FrenchDesk<span class="token punctuation">.</span>ranks<span class="token punctuation">.</span>index<span class="token punctuation">(</span>card<span class="token punctuation">.</span>rank<span class="token punctuation">)</span>    <span class="token keyword">return</span> rank_value<span class="token operator">*</span><span class="token builtin">len</span><span class="token punctuation">(</span>suits_value<span class="token punctuation">)</span><span class="token operator">+</span>suits_value<span class="token punctuation">[</span>card<span class="token punctuation">.</span>suit<span class="token punctuation">]</span><span class="token keyword">for</span> card <span class="token keyword">in</span> <span class="token builtin">sorted</span><span class="token punctuation">(</span>desk<span class="token punctuation">,</span> key<span class="token operator">=</span>spades_high<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>card<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p>Card(rank='2', suit='clubs') Card(rank='2', suit='diamonds') Card(rank='2', suit='hearts') Card(rank='2', suit='spades') Card(rank='3', suit='clubs') Card(rank='3', suit='diamonds') Card(rank='3', suit='hearts') Card(rank='3', suit='spades') Card(rank='4', suit='clubs') Card(rank='4', suit='diamonds') Card(rank='4', suit='hearts') Card(rank='4', suit='spades') Card(rank='5', suit='clubs') Card(rank='5', suit='diamonds') Card(rank='5', suit='hearts') Card(rank='5', suit='spades') Card(rank='6', suit='clubs') Card(rank='6', suit='diamonds') Card(rank='6', suit='hearts') Card(rank='6', suit='spades') Card(rank='7', suit='clubs') Card(rank='7', suit='diamonds') Card(rank='7', suit='hearts') Card(rank='7', suit='spades') Card(rank='8', suit='clubs') Card(rank='8', suit='diamonds') Card(rank='8', suit='hearts') Card(rank='8', suit='spades') Card(rank='9', suit='clubs') Card(rank='9', suit='diamonds') Card(rank='9', suit='hearts') Card(rank='9', suit='spades') Card(rank='10', suit='clubs') Card(rank='10', suit='diamonds') Card(rank='10', suit='hearts') Card(rank='10', suit='spades') Card(rank='J', suit='clubs') Card(rank='J', suit='diamonds') Card(rank='J', suit='hearts') Card(rank='J', suit='spades') Card(rank='Q', suit='clubs') Card(rank='Q', suit='diamonds') Card(rank='Q', suit='hearts') Card(rank='Q', suit='spades') Card(rank='K', suit='clubs') Card(rank='K', suit='diamonds') Card(rank='K', suit='hearts') Card(rank='K', suit='spades') Card(rank='A', suit='clubs') Card(rank='A', suit='diamonds') Card(rank='A', suit='hearts') Card(rank='A', suit='spades')</p></blockquote><h2 id="a-simple-two-dimensional-vector-class">1.2 A simple two-dimensional vector class</h2><p><img src="https://cdn.jsdelivr.net/gh/ZqtCtios/Image/img/20201206232143.png" alt="Special method names (operators excluded)"> <img src="https://cdn.jsdelivr.net/gh/ZqtCtios/Image/img/20201206232143.png" alt="Special method names for operators"></p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">from</span> math <span class="token keyword">import</span> hypot<span class="token keyword">class</span> <span class="token class-name">Vector</span><span class="token punctuation">:</span>        <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> x<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> y<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        self<span class="token punctuation">.</span>x <span class="token operator">=</span> x        self<span class="token punctuation">.</span>y <span class="token operator">=</span> y        <span class="token keyword">def</span> <span class="token function">__repr__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">return</span> <span class="token string-interpolation"><span class="token string">f'Vector(</span><span class="token interpolation"><span class="token punctuation">{</span>self<span class="token punctuation">.</span>x<span class="token punctuation">}</span></span><span class="token string">, </span><span class="token interpolation"><span class="token punctuation">{</span>self<span class="token punctuation">.</span>y<span class="token punctuation">}</span></span><span class="token string">)'</span></span>        <span class="token keyword">def</span> <span class="token function">__abs__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">return</span> hypot<span class="token punctuation">(</span>self<span class="token punctuation">.</span>x<span class="token punctuation">,</span> self<span class="token punctuation">.</span>y<span class="token punctuation">)</span>        <span class="token keyword">def</span> <span class="token function">__bool__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">return</span> <span class="token builtin">bool</span><span class="token punctuation">(</span><span class="token builtin">abs</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">)</span>        <span class="token keyword">def</span> <span class="token function">__add__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> other<span class="token punctuation">)</span><span class="token punctuation">:</span>        x <span class="token operator">=</span> self<span class="token punctuation">.</span>x <span class="token operator">+</span> other<span class="token punctuation">.</span>x        y <span class="token operator">=</span> self<span class="token punctuation">.</span>y <span class="token operator">+</span> other<span class="token punctuation">.</span>y        <span class="token keyword">return</span> Vector<span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span>        <span class="token keyword">def</span> <span class="token function">__mul__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> scalar<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">return</span> Vector<span class="token punctuation">(</span>self<span class="token punctuation">.</span>x<span class="token operator">*</span>scalar<span class="token punctuation">,</span> self<span class="token punctuation">.</span>y<span class="token operator">*</span>scalar<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-python" data-language="python"><code class="language-python">v1 <span class="token operator">=</span> Vector<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span>v2 <span class="token operator">=</span> Vector<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">)</span>v1 <span class="token operator">+</span> v2<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><blockquote><p>Vector(3, 6)</p></blockquote><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token builtin">abs</span><span class="token punctuation">(</span>v1<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><blockquote><p>2.23606797749979</p></blockquote><pre class="line-numbers language-python" data-language="python"><code class="language-python">v1<span class="token operator">*</span><span class="token number">3</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><blockquote><p>Vector(3, 6)</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> FluentPython </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
